{"numTotalTestSuites":13,"numPassedTestSuites":7,"numFailedTestSuites":6,"numPendingTestSuites":0,"numTotalTests":34,"numPassedTests":28,"numFailedTests":6,"numPendingTests":0,"numTodoTests":0,"snapshot":{"added":0,"failure":false,"filesAdded":0,"filesRemoved":0,"filesRemovedList":[],"filesUnmatched":0,"filesUpdated":0,"matched":0,"total":0,"unchecked":0,"uncheckedKeysByFile":[],"unmatched":0,"updated":0,"didUpdate":false},"startTime":1763866188502,"success":false,"testResults":[{"assertionResults":[{"ancestorTitles":["CSRF Token API Integration Tests","GET /api/csrf/token","Success Cases (200 OK)"],"fullName":"CSRF Token API Integration Tests GET /api/csrf/token Success Cases (200 OK) should return 200 with valid CSRF token","status":"passed","title":"should return 200 with valid CSRF token","duration":17.531457999999986,"failureMessages":[],"location":{"line":45,"column":7},"meta":{}},{"ancestorTitles":["CSRF Token API Integration Tests","GET /api/csrf/token","Success Cases (200 OK)"],"fullName":"CSRF Token API Integration Tests GET /api/csrf/token Success Cases (200 OK) should set csrf-token cookie in response","status":"passed","title":"should set csrf-token cookie in response","duration":1.209541999999999,"failureMessages":[],"location":{"line":64,"column":7},"meta":{}},{"ancestorTitles":["CSRF Token API Integration Tests","GET /api/csrf/token","Success Cases (200 OK)"],"fullName":"CSRF Token API Integration Tests GET /api/csrf/token Success Cases (200 OK) should return token matching cookie value","status":"passed","title":"should return token matching cookie value","duration":0.8682920000000536,"failureMessages":[],"location":{"line":74,"column":7},"meta":{}},{"ancestorTitles":["CSRF Token API Integration Tests","GET /api/csrf/token","Success Cases (200 OK)"],"fullName":"CSRF Token API Integration Tests GET /api/csrf/token Success Cases (200 OK) should generate unique tokens on consecutive requests","status":"passed","title":"should generate unique tokens on consecutive requests","duration":1.8206250000000068,"failureMessages":[],"location":{"line":90,"column":7},"meta":{}},{"ancestorTitles":["CSRF Token API Integration Tests","GET /api/csrf/token","Success Cases (200 OK)"],"fullName":"CSRF Token API Integration Tests GET /api/csrf/token Success Cases (200 OK) should work without authentication","status":"passed","title":"should work without authentication","duration":0.5176660000000197,"failureMessages":[],"location":{"line":109,"column":7},"meta":{}},{"ancestorTitles":["CSRF Token API Integration Tests","GET /api/csrf/token","Success Cases (200 OK)"],"fullName":"CSRF Token API Integration Tests GET /api/csrf/token Success Cases (200 OK) should return valid JSON content-type","status":"passed","title":"should return valid JSON content-type","duration":0.40749999999997044,"failureMessages":[],"location":{"line":123,"column":7},"meta":{}},{"ancestorTitles":["CSRF Token API Integration Tests","GET /api/csrf/token","Cookie Configuration"],"fullName":"CSRF Token API Integration Tests GET /api/csrf/token Cookie Configuration should set cookie with 24-hour expiration","status":"passed","title":"should set cookie with 24-hour expiration","duration":0.3981670000000008,"failureMessages":[],"location":{"line":134,"column":7},"meta":{}},{"ancestorTitles":["CSRF Token API Integration Tests","GET /api/csrf/token","Cookie Configuration"],"fullName":"CSRF Token API Integration Tests GET /api/csrf/token Cookie Configuration should set cookie with HttpOnly flag","status":"passed","title":"should set cookie with HttpOnly flag","duration":0.382583000000011,"failureMessages":[],"location":{"line":141,"column":7},"meta":{}},{"ancestorTitles":["CSRF Token API Integration Tests","GET /api/csrf/token","Cookie Configuration"],"fullName":"CSRF Token API Integration Tests GET /api/csrf/token Cookie Configuration should set cookie with SameSite=Lax","status":"passed","title":"should set cookie with SameSite=Lax","duration":0.2792919999999981,"failureMessages":[],"location":{"line":148,"column":7},"meta":{}},{"ancestorTitles":["CSRF Token API Integration Tests","GET /api/csrf/token","Cookie Configuration"],"fullName":"CSRF Token API Integration Tests GET /api/csrf/token Cookie Configuration should set cookie with Path=/","status":"passed","title":"should set cookie with Path=/","duration":0.290333999999973,"failureMessages":[],"location":{"line":155,"column":7},"meta":{}},{"ancestorTitles":["CSRF Token API Integration Tests","GET /api/csrf/token","Cookie Configuration"],"fullName":"CSRF Token API Integration Tests GET /api/csrf/token Cookie Configuration should set Secure flag in production","status":"passed","title":"should set Secure flag in production","duration":0.04833299999995688,"failureMessages":[],"location":{"line":162,"column":7},"meta":{}},{"ancestorTitles":["CSRF Token API Integration Tests","GET /api/csrf/token","Cookie Configuration"],"fullName":"CSRF Token API Integration Tests GET /api/csrf/token Cookie Configuration should set domain to .huntaze.com in production","status":"passed","title":"should set domain to .huntaze.com in production","duration":0.03866699999997536,"failureMessages":[],"location":{"line":172,"column":7},"meta":{}},{"ancestorTitles":["CSRF Token API Integration Tests","GET /api/csrf/token","Cookie Configuration"],"fullName":"CSRF Token API Integration Tests GET /api/csrf/token Cookie Configuration should not set domain in development","status":"passed","title":"should not set domain in development","duration":0.035750000000007276,"failureMessages":[],"location":{"line":182,"column":7},"meta":{}},{"ancestorTitles":["CSRF Token API Integration Tests","GET /api/csrf/token","HTTP Methods"],"fullName":"CSRF Token API Integration Tests GET /api/csrf/token HTTP Methods should accept GET requests","status":"passed","title":"should accept GET requests","duration":0.24491599999998925,"failureMessages":[],"location":{"line":194,"column":7},"meta":{}},{"ancestorTitles":["CSRF Token API Integration Tests","GET /api/csrf/token","HTTP Methods"],"fullName":"CSRF Token API Integration Tests GET /api/csrf/token HTTP Methods should reject POST requests","status":"failed","title":"should reject POST requests","duration":2.720708000000002,"failureMessages":["AssertionError: expected 200 to be 405 // Object.is equality\n    at /Users/765h/Huntaze/tests/integration/api/csrf-token.integration.test.ts:208:33\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at file:///Users/765h/Huntaze/node_modules/@vitest/runner/dist/index.js:753:20"],"location":{"line":202,"column":7},"meta":{}},{"ancestorTitles":["CSRF Token API Integration Tests","GET /api/csrf/token","HTTP Methods"],"fullName":"CSRF Token API Integration Tests GET /api/csrf/token HTTP Methods should reject PUT requests","status":"failed","title":"should reject PUT requests","duration":0.766666999999984,"failureMessages":["AssertionError: expected 200 to be 405 // Object.is equality\n    at /Users/765h/Huntaze/tests/integration/api/csrf-token.integration.test.ts:216:33\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at file:///Users/765h/Huntaze/node_modules/@vitest/runner/dist/index.js:753:20"],"location":{"line":211,"column":7},"meta":{}},{"ancestorTitles":["CSRF Token API Integration Tests","GET /api/csrf/token","HTTP Methods"],"fullName":"CSRF Token API Integration Tests GET /api/csrf/token HTTP Methods should reject DELETE requests","status":"failed","title":"should reject DELETE requests","duration":0.4900000000000091,"failureMessages":["AssertionError: expected 200 to be 405 // Object.is equality\n    at /Users/765h/Huntaze/tests/integration/api/csrf-token.integration.test.ts:224:33\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at file:///Users/765h/Huntaze/node_modules/@vitest/runner/dist/index.js:753:20"],"location":{"line":219,"column":7},"meta":{}},{"ancestorTitles":["CSRF Token API Integration Tests","GET /api/csrf/token","HTTP Methods"],"fullName":"CSRF Token API Integration Tests GET /api/csrf/token HTTP Methods should reject PATCH requests","status":"failed","title":"should reject PATCH requests","duration":0.3909580000000119,"failureMessages":["AssertionError: expected 200 to be 405 // Object.is equality\n    at /Users/765h/Huntaze/tests/integration/api/csrf-token.integration.test.ts:232:33\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at file:///Users/765h/Huntaze/node_modules/@vitest/runner/dist/index.js:753:20"],"location":{"line":227,"column":7},"meta":{}},{"ancestorTitles":["CSRF Token API Integration Tests","GET /api/csrf/token","Concurrent Access"],"fullName":"CSRF Token API Integration Tests GET /api/csrf/token Concurrent Access should handle 10 concurrent requests successfully","status":"passed","title":"should handle 10 concurrent requests successfully","duration":1.2996250000000487,"failureMessages":[],"location":{"line":237,"column":7},"meta":{}},{"ancestorTitles":["CSRF Token API Integration Tests","GET /api/csrf/token","Concurrent Access"],"fullName":"CSRF Token API Integration Tests GET /api/csrf/token Concurrent Access should handle 50 concurrent requests successfully","status":"passed","title":"should handle 50 concurrent requests successfully","duration":3.7956250000000296,"failureMessages":[],"location":{"line":257,"column":7},"meta":{}},{"ancestorTitles":["CSRF Token API Integration Tests","GET /api/csrf/token","Concurrent Access"],"fullName":"CSRF Token API Integration Tests GET /api/csrf/token Concurrent Access should handle 100 concurrent requests without errors","status":"passed","title":"should handle 100 concurrent requests without errors","duration":7.4172080000000165,"failureMessages":[],"location":{"line":276,"column":7},"meta":{}},{"ancestorTitles":["CSRF Token API Integration Tests","GET /api/csrf/token","Performance"],"fullName":"CSRF Token API Integration Tests GET /api/csrf/token Performance should respond within 100ms for single request","status":"passed","title":"should respond within 100ms for single request","duration":0.5482079999999883,"failureMessages":[],"location":{"line":292,"column":7},"meta":{}},{"ancestorTitles":["CSRF Token API Integration Tests","GET /api/csrf/token","Performance"],"fullName":"CSRF Token API Integration Tests GET /api/csrf/token Performance should handle 10 sequential requests within 500ms","status":"passed","title":"should handle 10 sequential requests within 500ms","duration":2.135582999999997,"failureMessages":[],"location":{"line":303,"column":7},"meta":{}},{"ancestorTitles":["CSRF Token API Integration Tests","GET /api/csrf/token","Performance"],"fullName":"CSRF Token API Integration Tests GET /api/csrf/token Performance should maintain consistent response times under load","status":"passed","title":"should maintain consistent response times under load","duration":3.5519160000000056,"failureMessages":[],"location":{"line":315,"column":7},"meta":{}},{"ancestorTitles":["CSRF Token API Integration Tests","GET /api/csrf/token","Error Handling"],"fullName":"CSRF Token API Integration Tests GET /api/csrf/token Error Handling should handle malformed requests gracefully","status":"failed","title":"should handle malformed requests gracefully","duration":1.8502500000000168,"failureMessages":["TypeError: Headers.append: \"\u0000\u0001\u0002\" is an invalid header value.\n    at Object.webidl.errors.exception (node:internal/deps/undici/undici:4060:14)\n    at Object.webidl.errors.invalidArgument (node:internal/deps/undici/undici:4071:28)\n    at appendHeader (node:internal/deps/undici/undici:9222:29)\n    at fill (node:internal/deps/undici/undici:9202:11)\n    at new Request (node:internal/deps/undici/undici:10378:13)\n    at new NextRequest (/Users/765h/Huntaze/node_modules/next/dist/server/web/spec-extension/request.js:42:14)\n    at mockFetch (/Users/765h/Huntaze/tests/integration/setup/api-test-client.ts:19:19)\n    at /Users/765h/Huntaze/tests/integration/api/csrf-token.integration.test.ts:341:32\n    at file:///Users/765h/Huntaze/node_modules/@vitest/runner/dist/index.js:157:11\n    at file:///Users/765h/Huntaze/node_modules/@vitest/runner/dist/index.js:753:26"],"location":{"line":340,"column":7},"meta":{}},{"ancestorTitles":["CSRF Token API Integration Tests","GET /api/csrf/token","Error Handling"],"fullName":"CSRF Token API Integration Tests GET /api/csrf/token Error Handling should handle requests with invalid query parameters","status":"passed","title":"should handle requests with invalid query parameters","duration":0.33745800000002646,"failureMessages":[],"location":{"line":352,"column":7},"meta":{}},{"ancestorTitles":["CSRF Token API Integration Tests","GET /api/csrf/token","Error Handling"],"fullName":"CSRF Token API Integration Tests GET /api/csrf/token Error Handling should handle requests with large headers","status":"passed","title":"should handle requests with large headers","duration":0.25445799999999963,"failureMessages":[],"location":{"line":359,"column":7},"meta":{}},{"ancestorTitles":["CSRF Token API Integration Tests","GET /api/csrf/token","Security Headers"],"fullName":"CSRF Token API Integration Tests GET /api/csrf/token Security Headers should include security headers in response","status":"failed","title":"should include security headers in response","duration":0.5217079999999896,"failureMessages":["AssertionError: expected null to be truthy\n    at /Users/765h/Huntaze/tests/integration/api/csrf-token.integration.test.ts:383:55\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at file:///Users/765h/Huntaze/node_modules/@vitest/runner/dist/index.js:753:20"],"location":{"line":374,"column":7},"meta":{}},{"ancestorTitles":["CSRF Token API Integration Tests","GET /api/csrf/token","Security Headers"],"fullName":"CSRF Token API Integration Tests GET /api/csrf/token Security Headers should not expose sensitive information in headers","status":"passed","title":"should not expose sensitive information in headers","duration":0.29291699999998855,"failureMessages":[],"location":{"line":387,"column":7},"meta":{}},{"ancestorTitles":["CSRF Token API Integration Tests","GET /api/csrf/token","Token Validation"],"fullName":"CSRF Token API Integration Tests GET /api/csrf/token Token Validation should generate cryptographically secure tokens","status":"passed","title":"should generate cryptographically secure tokens","duration":0.5372500000000286,"failureMessages":[],"location":{"line":401,"column":7},"meta":{}},{"ancestorTitles":["CSRF Token API Integration Tests","GET /api/csrf/token","Token Validation"],"fullName":"CSRF Token API Integration Tests GET /api/csrf/token Token Validation should not generate predictable tokens","status":"passed","title":"should not generate predictable tokens","duration":4.370499999999993,"failureMessages":[],"location":{"line":416,"column":7},"meta":{}},{"ancestorTitles":["CSRF Token API Integration Tests","GET /api/csrf/token","Rate Limiting"],"fullName":"CSRF Token API Integration Tests GET /api/csrf/token Rate Limiting should apply global rate limiting if configured","status":"passed","title":"should apply global rate limiting if configured","duration":9.29708400000004,"failureMessages":[],"location":{"line":442,"column":7},"meta":{}},{"ancestorTitles":["CSRF Token API Integration Tests","GET /api/csrf/token","Rate Limiting"],"fullName":"CSRF Token API Integration Tests GET /api/csrf/token Rate Limiting should include rate limit headers if rate limited","status":"passed","title":"should include rate limit headers if rate limited","duration":8.367083999999977,"failureMessages":[],"location":{"line":460,"column":7},"meta":{}},{"ancestorTitles":["CSRF Token API Integration Tests","GET /api/csrf/token","Idempotency"],"fullName":"CSRF Token API Integration Tests GET /api/csrf/token Idempotency should generate new token on each request (not idempotent)","status":"passed","title":"should generate new token on each request (not idempotent)","duration":0.7429580000000442,"failureMessages":[],"location":{"line":480,"column":7},"meta":{}}],"startTime":1763866189228,"endTime":1763866189301.743,"status":"failed","message":"","name":"/Users/765h/Huntaze/tests/integration/api/csrf-token.integration.test.ts"}]}