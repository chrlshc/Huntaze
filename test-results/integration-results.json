{"numTotalTestSuites":140,"numPassedTestSuites":78,"numFailedTestSuites":62,"numPendingTestSuites":0,"numTotalTests":335,"numPassedTests":257,"numFailedTests":78,"numPendingTests":0,"numTodoTests":0,"snapshot":{"added":0,"failure":false,"filesAdded":0,"filesRemoved":0,"filesRemovedList":[],"filesUnmatched":0,"filesUpdated":0,"matched":0,"total":0,"unchecked":0,"uncheckedKeysByFile":[],"unmatched":0,"updated":0,"didUpdate":false},"startTime":1763743280074,"success":false,"testResults":[{"assertionResults":[{"ancestorTitles":["Auth Login API Integration Tests","Success Cases"],"fullName":"Auth Login API Integration Tests Success Cases should return 200 with valid credentials","status":"failed","title":"should return 200 with valid credentials","duration":2442.4603749999997,"failureMessages":["AssertionError: expected 401 to be 200 // Object.is equality\n    at /Users/765h/Huntaze/tests/integration/api/auth-login.integration.test.ts:149:31\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at file:///Users/765h/Huntaze/node_modules/@vitest/runner/dist/index.js:753:20"],"location":{"line":146,"column":5},"meta":{}},{"ancestorTitles":["Auth Login API Integration Tests","Success Cases"],"fullName":"Auth Login API Integration Tests Success Cases should return user data on successful login","status":"passed","title":"should return user data on successful login","duration":967.6317920000001,"failureMessages":[],"location":{"line":161,"column":5},"meta":{}},{"ancestorTitles":["Auth Login API Integration Tests","Success Cases"],"fullName":"Auth Login API Integration Tests Success Cases should create session cookie on successful login","status":"passed","title":"should create session cookie on successful login","duration":948.9492499999997,"failureMessages":[],"location":{"line":173,"column":5},"meta":{}},{"ancestorTitles":["Auth Login API Integration Tests","Success Cases"],"fullName":"Auth Login API Integration Tests Success Cases should handle remember me option","status":"failed","title":"should handle remember me option","duration":662.6175830000002,"failureMessages":["AssertionError: expected 401 to be 200 // Object.is equality\n    at /Users/765h/Huntaze/tests/integration/api/auth-login.integration.test.ts:185:31\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at file:///Users/765h/Huntaze/node_modules/@vitest/runner/dist/index.js:753:20"],"location":{"line":182,"column":5},"meta":{}},{"ancestorTitles":["Auth Login API Integration Tests","Success Cases"],"fullName":"Auth Login API Integration Tests Success Cases should allow login with unverified email","status":"failed","title":"should allow login with unverified email","duration":764.4241250000005,"failureMessages":["PrismaClientKnownRequestError: \nInvalid `prisma.user.update()` invocation in\n/Users/765h/Huntaze/tests/integration/api/auth-login.integration.test.ts:200:25\n\n  197 \n  198 it('should allow login with unverified email', async () => {\n  199   // Update user to unverified\n→ 200   await prisma.user.update(\nAn operation failed because it depends on one or more records that were required but not found. No record was found for an update.\n    at ei.handleRequestError (/Users/765h/Huntaze/node_modules/@prisma/client/runtime/library.js:121:7268)\n    at ei.handleAndLogRequestError (/Users/765h/Huntaze/node_modules/@prisma/client/runtime/library.js:121:6593)\n    at ei.request (/Users/765h/Huntaze/node_modules/@prisma/client/runtime/library.js:121:6300)\n    at a (/Users/765h/Huntaze/node_modules/@prisma/client/runtime/library.js:130:9551)\n    at /Users/765h/Huntaze/tests/integration/api/auth-login.integration.test.ts:200:7\n    at file:///Users/765h/Huntaze/node_modules/@vitest/runner/dist/index.js:753:20"],"location":{"line":198,"column":5},"meta":{}},{"ancestorTitles":["Auth Login API Integration Tests","Success Cases"],"fullName":"Auth Login API Integration Tests Success Cases should be case-insensitive for email","status":"passed","title":"should be case-insensitive for email","duration":953.8589169999996,"failureMessages":[],"location":{"line":211,"column":5},"meta":{}},{"ancestorTitles":["Auth Login API Integration Tests","Authentication Failures"],"fullName":"Auth Login API Integration Tests Authentication Failures should return 401 with invalid password","status":"passed","title":"should return 401 with invalid password","duration":674.2840419999993,"failureMessages":[],"location":{"line":226,"column":5},"meta":{}},{"ancestorTitles":["Auth Login API Integration Tests","Authentication Failures"],"fullName":"Auth Login API Integration Tests Authentication Failures should return 401 for non-existent user","status":"passed","title":"should return 401 for non-existent user","duration":722.4363329999996,"failureMessages":[],"location":{"line":244,"column":5},"meta":{}},{"ancestorTitles":["Auth Login API Integration Tests","Authentication Failures"],"fullName":"Auth Login API Integration Tests Authentication Failures should not reveal if user exists","status":"passed","title":"should not reveal if user exists","duration":751.1146249999983,"failureMessages":[],"location":{"line":256,"column":5},"meta":{}},{"ancestorTitles":["Auth Login API Integration Tests","Authentication Failures"],"fullName":"Auth Login API Integration Tests Authentication Failures should not create session on failed login","status":"passed","title":"should not create session on failed login","duration":1045.7531670000008,"failureMessages":[],"location":{"line":276,"column":5},"meta":{}},{"ancestorTitles":["Auth Login API Integration Tests","Validation Errors"],"fullName":"Auth Login API Integration Tests Validation Errors should return 400 with missing email","status":"passed","title":"should return 400 with missing email","duration":563.799583,"failureMessages":[],"location":{"line":293,"column":5},"meta":{}},{"ancestorTitles":["Auth Login API Integration Tests","Validation Errors"],"fullName":"Auth Login API Integration Tests Validation Errors should return 400 with missing password","status":"passed","title":"should return 400 with missing password","duration":575.2214160000003,"failureMessages":[],"location":{"line":308,"column":5},"meta":{}},{"ancestorTitles":["Auth Login API Integration Tests","Validation Errors"],"fullName":"Auth Login API Integration Tests Validation Errors should return 400 with invalid email format","status":"passed","title":"should return 400 with invalid email format","duration":575.0626670000001,"failureMessages":[],"location":{"line":323,"column":5},"meta":{}},{"ancestorTitles":["Auth Login API Integration Tests","Validation Errors"],"fullName":"Auth Login API Integration Tests Validation Errors should return 400 with empty email","status":"passed","title":"should return 400 with empty email","duration":611.8589169999996,"failureMessages":[],"location":{"line":334,"column":5},"meta":{}},{"ancestorTitles":["Auth Login API Integration Tests","Validation Errors"],"fullName":"Auth Login API Integration Tests Validation Errors should return 400 with empty password","status":"passed","title":"should return 400 with empty password","duration":570.2305410000008,"failureMessages":[],"location":{"line":340,"column":5},"meta":{}},{"ancestorTitles":["Auth Login API Integration Tests","Rate Limiting"],"fullName":"Auth Login API Integration Tests Rate Limiting should handle multiple login attempts","status":"failed","title":"should handle multiple login attempts","duration":1038.7854580000003,"failureMessages":["AssertionError: expected 401 to be 200 // Object.is equality\n    at /Users/765h/Huntaze/tests/integration/api/auth-login.integration.test.ts:363:33\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at file:///Users/765h/Huntaze/node_modules/@vitest/runner/dist/index.js:753:20"],"location":{"line":352,"column":5},"meta":{}},{"ancestorTitles":["Auth Login API Integration Tests","Rate Limiting"],"fullName":"Auth Login API Integration Tests Rate Limiting should handle concurrent login requests","status":"failed","title":"should handle concurrent login requests","duration":1323.526833,"failureMessages":["AssertionError: expected 401 to be 200 // Object.is equality\n    at /Users/765h/Huntaze/tests/integration/api/auth-login.integration.test.ts:376:33\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at file:///Users/765h/Huntaze/node_modules/@vitest/runner/dist/index.js:753:20"],"location":{"line":367,"column":5},"meta":{}},{"ancestorTitles":["Auth Login API Integration Tests","Security Measures"],"fullName":"Auth Login API Integration Tests Security Measures should hash passwords in database","status":"failed","title":"should hash passwords in database","duration":930.2293330000011,"failureMessages":["AssertionError: expected undefined to be defined\n    at /Users/765h/Huntaze/tests/integration/api/auth-login.integration.test.ts:391:30\n    at file:///Users/765h/Huntaze/node_modules/@vitest/runner/dist/index.js:753:20"],"location":{"line":386,"column":5},"meta":{}},{"ancestorTitles":["Auth Login API Integration Tests","Security Measures"],"fullName":"Auth Login API Integration Tests Security Measures should not return password in response","status":"passed","title":"should not return password in response","duration":976.8335000000006,"failureMessages":[],"location":{"line":396,"column":5},"meta":{}},{"ancestorTitles":["Auth Login API Integration Tests","Security Measures"],"fullName":"Auth Login API Integration Tests Security Measures should set secure cookie flags","status":"passed","title":"should set secure cookie flags","duration":653.5938750000023,"failureMessages":[],"location":{"line":405,"column":5},"meta":{}},{"ancestorTitles":["Auth Login API Integration Tests","Security Measures"],"fullName":"Auth Login API Integration Tests Security Measures should include correlation ID in responses","status":"failed","title":"should include correlation ID in responses","duration":661.1266670000005,"failureMessages":["AssertionError: expected null to be truthy\n    at /Users/765h/Huntaze/tests/integration/api/auth-login.integration.test.ts:429:29\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at file:///Users/765h/Huntaze/node_modules/@vitest/runner/dist/index.js:753:20"],"location":{"line":424,"column":5},"meta":{}},{"ancestorTitles":["Auth Login API Integration Tests","Performance"],"fullName":"Auth Login API Integration Tests Performance should respond within 500ms","status":"passed","title":"should respond within 500ms","duration":687.6733339999992,"failureMessages":[],"location":{"line":439,"column":5},"meta":{}},{"ancestorTitles":["Auth Login API Integration Tests","Performance"],"fullName":"Auth Login API Integration Tests Performance should handle 20 concurrent logins efficiently","status":"passed","title":"should handle 20 concurrent logins efficiently","duration":1332.2069999999985,"failureMessages":[],"location":{"line":449,"column":5},"meta":{}},{"ancestorTitles":["Auth Login API Integration Tests","Error Handling"],"fullName":"Auth Login API Integration Tests Error Handling should handle database errors gracefully","status":"passed","title":"should handle database errors gracefully","duration":657.1026669999992,"failureMessages":[],"location":{"line":470,"column":5},"meta":{}},{"ancestorTitles":["Auth Login API Integration Tests","Error Handling"],"fullName":"Auth Login API Integration Tests Error Handling should return user-friendly error messages","status":"passed","title":"should return user-friendly error messages","duration":953.3392910000002,"failureMessages":[],"location":{"line":480,"column":5},"meta":{}},{"ancestorTitles":["Auth Login API Integration Tests","Edge Cases"],"fullName":"Auth Login API Integration Tests Edge Cases should handle very long passwords","status":"passed","title":"should handle very long passwords","duration":1020.2488340000018,"failureMessages":[],"location":{"line":500,"column":5},"meta":{}},{"ancestorTitles":["Auth Login API Integration Tests","Edge Cases"],"fullName":"Auth Login API Integration Tests Edge Cases should handle special characters in password","status":"passed","title":"should handle special characters in password","duration":1626.8369999999995,"failureMessages":[],"location":{"line":509,"column":5},"meta":{}},{"ancestorTitles":["Auth Login API Integration Tests","Edge Cases"],"fullName":"Auth Login API Integration Tests Edge Cases should handle unicode characters in email","status":"passed","title":"should handle unicode characters in email","duration":575.0694580000018,"failureMessages":[],"location":{"line":533,"column":5},"meta":{}},{"ancestorTitles":["Auth Login API Integration Tests","Edge Cases"],"fullName":"Auth Login API Integration Tests Edge Cases should handle whitespace in email","status":"passed","title":"should handle whitespace in email","duration":564.6704580000005,"failureMessages":[],"location":{"line":540,"column":5},"meta":{}}],"startTime":1763743281474,"endTime":1763743307304.6704,"status":"failed","message":"","name":"/Users/765h/Huntaze/tests/integration/api/auth-login.integration.test.ts"},{"assertionResults":[{"ancestorTitles":["Auth Logout API Integration Tests","Success Cases"],"fullName":"Auth Logout API Integration Tests Success Cases should return 200 with valid logout request","status":"passed","title":"should return 200 with valid logout request","duration":596.0000830000026,"failureMessages":[],"location":{"line":169,"column":5},"meta":{}},{"ancestorTitles":["Auth Logout API Integration Tests","Success Cases"],"fullName":"Auth Logout API Integration Tests Success Cases should return success message","status":"passed","title":"should return success message","duration":566.4655409999978,"failureMessages":[],"location":{"line":184,"column":5},"meta":{}},{"ancestorTitles":["Auth Logout API Integration Tests","Success Cases"],"fullName":"Auth Logout API Integration Tests Success Cases should clear session cookie","status":"passed","title":"should clear session cookie","duration":636.3695000000007,"failureMessages":[],"location":{"line":194,"column":5},"meta":{}},{"ancestorTitles":["Auth Logout API Integration Tests","Success Cases"],"fullName":"Auth Logout API Integration Tests Success Cases should invalidate user cache","status":"passed","title":"should invalidate user cache","duration":575.2368750000023,"failureMessages":[],"location":{"line":203,"column":5},"meta":{}},{"ancestorTitles":["Auth Logout API Integration Tests","Success Cases"],"fullName":"Auth Logout API Integration Tests Success Cases should include correlation ID","status":"passed","title":"should include correlation ID","duration":580.4005840000027,"failureMessages":[],"location":{"line":218,"column":5},"meta":{}},{"ancestorTitles":["Auth Logout API Integration Tests","Authentication Failures"],"fullName":"Auth Logout API Integration Tests Authentication Failures should return 401 without session","status":"passed","title":"should return 401 without session","duration":571.7574999999997,"failureMessages":[],"location":{"line":233,"column":5},"meta":{}},{"ancestorTitles":["Auth Logout API Integration Tests","Authentication Failures"],"fullName":"Auth Logout API Integration Tests Authentication Failures should return 401 with invalid session","status":"passed","title":"should return 401 with invalid session","duration":574.5980830000008,"failureMessages":[],"location":{"line":244,"column":5},"meta":{}},{"ancestorTitles":["Auth Logout API Integration Tests","Authentication Failures"],"fullName":"Auth Logout API Integration Tests Authentication Failures should include error details in 401 response","status":"passed","title":"should include error details in 401 response","duration":568.6674159999966,"failureMessages":[],"location":{"line":250,"column":5},"meta":{}},{"ancestorTitles":["Auth Logout API Integration Tests","CSRF Protection"],"fullName":"Auth Logout API Integration Tests CSRF Protection should accept request without CSRF token in test mode","status":"passed","title":"should accept request without CSRF token in test mode","duration":571.8913749999992,"failureMessages":[],"location":{"line":273,"column":5},"meta":{}},{"ancestorTitles":["Auth Logout API Integration Tests","CSRF Protection"],"fullName":"Auth Logout API Integration Tests CSRF Protection should accept request with invalid CSRF token in test mode","status":"passed","title":"should accept request with invalid CSRF token in test mode","duration":593.6781670000018,"failureMessages":[],"location":{"line":281,"column":5},"meta":{}},{"ancestorTitles":["Auth Logout API Integration Tests","Concurrent Logout"],"fullName":"Auth Logout API Integration Tests Concurrent Logout should handle concurrent logout requests gracefully","status":"passed","title":"should handle concurrent logout requests gracefully","duration":572.9373749999977,"failureMessages":[],"location":{"line":295,"column":5},"meta":{}},{"ancestorTitles":["Auth Logout API Integration Tests","Concurrent Logout"],"fullName":"Auth Logout API Integration Tests Concurrent Logout should not cause race conditions","status":"passed","title":"should not cause race conditions","duration":593.8659999999982,"failureMessages":[],"location":{"line":310,"column":5},"meta":{}},{"ancestorTitles":["Auth Logout API Integration Tests","Performance"],"fullName":"Auth Logout API Integration Tests Performance should respond within 500ms","status":"passed","title":"should respond within 500ms","duration":575.1368750000001,"failureMessages":[],"location":{"line":329,"column":5},"meta":{}},{"ancestorTitles":["Auth Logout API Integration Tests","Error Handling"],"fullName":"Auth Logout API Integration Tests Error Handling should include correlation ID in all responses","status":"passed","title":"should include correlation ID in all responses","duration":578.2147499999992,"failureMessages":[],"location":{"line":345,"column":5},"meta":{}},{"ancestorTitles":["Auth Logout API Integration Tests","Error Handling"],"fullName":"Auth Logout API Integration Tests Error Handling should return user-friendly error messages","status":"passed","title":"should return user-friendly error messages","duration":578.632875000003,"failureMessages":[],"location":{"line":353,"column":5},"meta":{}},{"ancestorTitles":["Auth Logout API Integration Tests","Session Invalidation"],"fullName":"Auth Logout API Integration Tests Session Invalidation should prevent access to protected routes after logout","status":"failed","title":"should prevent access to protected routes after logout","duration":984.2040840000009,"failureMessages":["AssertionError: expected 200 to be 401 // Object.is equality\n    at /Users/765h/Huntaze/tests/integration/api/auth-logout.integration.test.ts:382:31\n    at file:///Users/765h/Huntaze/node_modules/@vitest/runner/dist/index.js:753:20"],"location":{"line":372,"column":5},"meta":{}},{"ancestorTitles":["Auth Logout API Integration Tests","Session Invalidation"],"fullName":"Auth Logout API Integration Tests Session Invalidation should clear all session data","status":"passed","title":"should clear all session data","duration":585.7188749999987,"failureMessages":[],"location":{"line":385,"column":5},"meta":{}}],"startTime":1763743302334,"endTime":1763743312636.719,"status":"failed","message":"","name":"/Users/765h/Huntaze/tests/integration/api/auth-logout.integration.test.ts"},{"assertionResults":[{"ancestorTitles":["Auth Register API Integration Tests","CSRF Protection"],"fullName":"Auth Register API Integration Tests CSRF Protection should return 403 without CSRF token","status":"passed","title":"should return 403 without CSRF token","duration":1952.397708,"failureMessages":[],"location":{"line":191,"column":5},"meta":{}},{"ancestorTitles":["Auth Register API Integration Tests","CSRF Protection"],"fullName":"Auth Register API Integration Tests CSRF Protection should return CSRF_ERROR code without token","status":"passed","title":"should return CSRF_ERROR code without token","duration":674.493125,"failureMessages":[],"location":{"line":205,"column":5},"meta":{}},{"ancestorTitles":["Auth Register API Integration Tests","CSRF Protection"],"fullName":"Auth Register API Integration Tests CSRF Protection should return 403 with invalid CSRF token","status":"passed","title":"should return 403 with invalid CSRF token","duration":660.8433749999999,"failureMessages":[],"location":{"line":218,"column":5},"meta":{}},{"ancestorTitles":["Auth Register API Integration Tests","CSRF Protection"],"fullName":"Auth Register API Integration Tests CSRF Protection should not create user without valid CSRF token","status":"failed","title":"should not create user without valid CSRF token","duration":929.3159159999996,"failureMessages":["AssertionError: expected 26 to be 22 // Object.is equality\n    at /Users/765h/Huntaze/tests/integration/api/auth-register.integration.test.ts:247:26\n    at file:///Users/765h/Huntaze/node_modules/@vitest/runner/dist/index.js:753:20"],"location":{"line":232,"column":5},"meta":{}},{"ancestorTitles":["Auth Register API Integration Tests","CSRF Protection"],"fullName":"Auth Register API Integration Tests CSRF Protection should include correlation ID in CSRF error","status":"passed","title":"should include correlation ID in CSRF error","duration":666.4467919999997,"failureMessages":[],"location":{"line":250,"column":5},"meta":{}},{"ancestorTitles":["Auth Register API Integration Tests","Success Cases"],"fullName":"Auth Register API Integration Tests Success Cases should return 201 with valid registration data","status":"passed","title":"should return 201 with valid registration data","duration":676.9956249999996,"failureMessages":[],"location":{"line":270,"column":5},"meta":{}},{"ancestorTitles":["Auth Register API Integration Tests","Success Cases"],"fullName":"Auth Register API Integration Tests Success Cases should create user in database","status":"passed","title":"should create user in database","duration":847.8817079999999,"failureMessages":[],"location":{"line":290,"column":5},"meta":{}},{"ancestorTitles":["Auth Register API Integration Tests","Success Cases"],"fullName":"Auth Register API Integration Tests Success Cases should hash password in database","status":"passed","title":"should hash password in database","duration":769.0660829999997,"failureMessages":[],"location":{"line":309,"column":5},"meta":{}},{"ancestorTitles":["Auth Register API Integration Tests","Success Cases"],"fullName":"Auth Register API Integration Tests Success Cases should use bcrypt with 12 rounds","status":"passed","title":"should use bcrypt with 12 rounds","duration":757.7170409999999,"failureMessages":[],"location":{"line":328,"column":5},"meta":{}},{"ancestorTitles":["Auth Register API Integration Tests","Success Cases"],"fullName":"Auth Register API Integration Tests Success Cases should set emailVerified to false","status":"passed","title":"should set emailVerified to false","duration":765.3408749999999,"failureMessages":[],"location":{"line":346,"column":5},"meta":{}},{"ancestorTitles":["Auth Register API Integration Tests","Success Cases"],"fullName":"Auth Register API Integration Tests Success Cases should set onboardingCompleted to false","status":"passed","title":"should set onboardingCompleted to false","duration":760.7065000000002,"failureMessages":[],"location":{"line":363,"column":5},"meta":{}},{"ancestorTitles":["Auth Register API Integration Tests","Success Cases"],"fullName":"Auth Register API Integration Tests Success Cases should allow registration without name","status":"passed","title":"should allow registration without name","duration":822.1209580000013,"failureMessages":[],"location":{"line":380,"column":5},"meta":{}},{"ancestorTitles":["Auth Register API Integration Tests","Success Cases"],"fullName":"Auth Register API Integration Tests Success Cases should return user data in response","status":"passed","title":"should return user data in response","duration":663.2149170000012,"failureMessages":[],"location":{"line":400,"column":5},"meta":{}},{"ancestorTitles":["Auth Register API Integration Tests","Success Cases"],"fullName":"Auth Register API Integration Tests Success Cases should include success message","status":"passed","title":"should include success message","duration":669.533875000001,"failureMessages":[],"location":{"line":415,"column":5},"meta":{}},{"ancestorTitles":["Auth Register API Integration Tests","Success Cases"],"fullName":"Auth Register API Integration Tests Success Cases should include duration in response","status":"passed","title":"should include duration in response","duration":684.0360830000009,"failureMessages":[],"location":{"line":429,"column":5},"meta":{}},{"ancestorTitles":["Auth Register API Integration Tests","Success Cases"],"fullName":"Auth Register API Integration Tests Success Cases should store email in lowercase","status":"passed","title":"should store email in lowercase","duration":768.4043340000007,"failureMessages":[],"location":{"line":444,"column":5},"meta":{}},{"ancestorTitles":["Auth Register API Integration Tests","Validation Errors"],"fullName":"Auth Register API Integration Tests Validation Errors should return 400 with missing email","status":"passed","title":"should return 400 with missing email","duration":184.28287499999897,"failureMessages":[],"location":{"line":467,"column":5},"meta":{}},{"ancestorTitles":["Auth Register API Integration Tests","Validation Errors"],"fullName":"Auth Register API Integration Tests Validation Errors should return 400 with missing password","status":"passed","title":"should return 400 with missing password","duration":186.8648749999993,"failureMessages":[],"location":{"line":487,"column":5},"meta":{}},{"ancestorTitles":["Auth Register API Integration Tests","Validation Errors"],"fullName":"Auth Register API Integration Tests Validation Errors should return 400 with invalid email format","status":"passed","title":"should return 400 with invalid email format","duration":185.55741599999965,"failureMessages":[],"location":{"line":507,"column":5},"meta":{}},{"ancestorTitles":["Auth Register API Integration Tests","Validation Errors"],"fullName":"Auth Register API Integration Tests Validation Errors should return 400 with password less than 8 characters","status":"passed","title":"should return 400 with password less than 8 characters","duration":185.68495800000164,"failureMessages":[],"location":{"line":525,"column":5},"meta":{}},{"ancestorTitles":["Auth Register API Integration Tests","Validation Errors"],"fullName":"Auth Register API Integration Tests Validation Errors should return 400 with password missing uppercase","status":"passed","title":"should return 400 with password missing uppercase","duration":184.8802909999995,"failureMessages":[],"location":{"line":543,"column":5},"meta":{}},{"ancestorTitles":["Auth Register API Integration Tests","Validation Errors"],"fullName":"Auth Register API Integration Tests Validation Errors should return 400 with password missing lowercase","status":"passed","title":"should return 400 with password missing lowercase","duration":182.56162499999846,"failureMessages":[],"location":{"line":557,"column":5},"meta":{}},{"ancestorTitles":["Auth Register API Integration Tests","Validation Errors"],"fullName":"Auth Register API Integration Tests Validation Errors should return 400 with password missing numbers","status":"passed","title":"should return 400 with password missing numbers","duration":184.97258300000067,"failureMessages":[],"location":{"line":571,"column":5},"meta":{}},{"ancestorTitles":["Auth Register API Integration Tests","Validation Errors"],"fullName":"Auth Register API Integration Tests Validation Errors should return 400 with empty email","status":"passed","title":"should return 400 with empty email","duration":183.26470899999913,"failureMessages":[],"location":{"line":585,"column":5},"meta":{}},{"ancestorTitles":["Auth Register API Integration Tests","Validation Errors"],"fullName":"Auth Register API Integration Tests Validation Errors should return 400 with empty password","status":"passed","title":"should return 400 with empty password","duration":186.81716699999924,"failureMessages":[],"location":{"line":591,"column":5},"meta":{}},{"ancestorTitles":["Auth Register API Integration Tests","Validation Errors"],"fullName":"Auth Register API Integration Tests Validation Errors should validate email format strictly","status":"passed","title":"should validate email format strictly","duration":187.05820800000038,"failureMessages":[],"location":{"line":597,"column":5},"meta":{}},{"ancestorTitles":["Auth Register API Integration Tests","Validation Errors"],"fullName":"Auth Register API Integration Tests Validation Errors should return 400 with invalid request body","status":"passed","title":"should return 400 with invalid request body","duration":184.23508399999992,"failureMessages":[],"location":{"line":622,"column":5},"meta":{}},{"ancestorTitles":["Auth Register API Integration Tests","Duplicate User Handling"],"fullName":"Auth Register API Integration Tests Duplicate User Handling should return 409 when user already exists","status":"passed","title":"should return 409 when user already exists","duration":884.8993339999979,"failureMessages":[],"location":{"line":644,"column":5},"meta":{}},{"ancestorTitles":["Auth Register API Integration Tests","Duplicate User Handling"],"fullName":"Auth Register API Integration Tests Duplicate User Handling should be case-insensitive for duplicate detection","status":"passed","title":"should be case-insensitive for duplicate detection","duration":693.7300419999992,"failureMessages":[],"location":{"line":666,"column":5},"meta":{}},{"ancestorTitles":["Auth Register API Integration Tests","Duplicate User Handling"],"fullName":"Auth Register API Integration Tests Duplicate User Handling should not create duplicate users","status":"passed","title":"should not create duplicate users","duration":949.7058749999997,"failureMessages":[],"location":{"line":684,"column":5},"meta":{}},{"ancestorTitles":["Auth Register API Integration Tests","Duplicate User Handling"],"fullName":"Auth Register API Integration Tests Duplicate User Handling should handle race condition with unique constraint","status":"passed","title":"should handle race condition with unique constraint","duration":668.7519580000007,"failureMessages":[],"location":{"line":707,"column":5},"meta":{}},{"ancestorTitles":["Auth Register API Integration Tests","Security Measures"],"fullName":"Auth Register API Integration Tests Security Measures should not return password in response","status":"passed","title":"should not return password in response","duration":684.9184170000008,"failureMessages":[],"location":{"line":730,"column":5},"meta":{}},{"ancestorTitles":["Auth Register API Integration Tests","Security Measures"],"fullName":"Auth Register API Integration Tests Security Measures should include correlation ID in all responses","status":"passed","title":"should include correlation ID in all responses","duration":663.7955839999995,"failureMessages":[],"location":{"line":744,"column":5},"meta":{}},{"ancestorTitles":["Auth Register API Integration Tests","Security Measures"],"fullName":"Auth Register API Integration Tests Security Measures should include duration header","status":"passed","title":"should include duration header","duration":665.5775410000024,"failureMessages":[],"location":{"line":758,"column":5},"meta":{}},{"ancestorTitles":["Auth Register API Integration Tests","Security Measures"],"fullName":"Auth Register API Integration Tests Security Measures should set Cache-Control header","status":"passed","title":"should set Cache-Control header","duration":667.0893340000002,"failureMessages":[],"location":{"line":772,"column":5},"meta":{}},{"ancestorTitles":["Auth Register API Integration Tests","Security Measures"],"fullName":"Auth Register API Integration Tests Security Measures should not expose internal error details","status":"passed","title":"should not expose internal error details","duration":184.21158400000058,"failureMessages":[],"location":{"line":787,"column":5},"meta":{}},{"ancestorTitles":["Auth Register API Integration Tests","Performance"],"fullName":"Auth Register API Integration Tests Performance should respond within 1 second","status":"passed","title":"should respond within 1 second","duration":669.6306669999976,"failureMessages":[],"location":{"line":810,"column":5},"meta":{}},{"ancestorTitles":["Auth Register API Integration Tests","Performance"],"fullName":"Auth Register API Integration Tests Performance should handle concurrent registrations","status":"passed","title":"should handle concurrent registrations","duration":4314.612417,"failureMessages":[],"location":{"line":827,"column":5},"meta":{}},{"ancestorTitles":["Auth Register API Integration Tests","Performance"],"fullName":"Auth Register API Integration Tests Performance should maintain performance under load","status":"passed","title":"should maintain performance under load","duration":10080.436875000003,"failureMessages":[],"location":{"line":842,"column":5},"meta":{}},{"ancestorTitles":["Auth Register API Integration Tests","Data Integrity"],"fullName":"Auth Register API Integration Tests Data Integrity should set createdAt and updatedAt timestamps","status":"passed","title":"should set createdAt and updatedAt timestamps","duration":854.6982080000016,"failureMessages":[],"location":{"line":870,"column":5},"meta":{}},{"ancestorTitles":["Auth Register API Integration Tests","Data Integrity"],"fullName":"Auth Register API Integration Tests Data Integrity should create user with all required fields","status":"passed","title":"should create user with all required fields","duration":799.5184169999993,"failureMessages":[],"location":{"line":890,"column":5},"meta":{}},{"ancestorTitles":["Auth Register API Integration Tests","Data Integrity"],"fullName":"Auth Register API Integration Tests Data Integrity should handle transaction rollback on error","status":"passed","title":"should handle transaction rollback on error","duration":465.4032920000027,"failureMessages":[],"location":{"line":913,"column":5},"meta":{}},{"ancestorTitles":["Auth Register API Integration Tests","Error Handling"],"fullName":"Auth Register API Integration Tests Error Handling should return structured error responses","status":"passed","title":"should return structured error responses","duration":188.17091600000276,"failureMessages":[],"location":{"line":932,"column":5},"meta":{}},{"ancestorTitles":["Auth Register API Integration Tests","Error Handling"],"fullName":"Auth Register API Integration Tests Error Handling should include retryable flag for transient errors","status":"passed","title":"should include retryable flag for transient errors","duration":215.2135419999977,"failureMessages":[],"location":{"line":950,"column":5},"meta":{}},{"ancestorTitles":["Auth Register API Integration Tests","Error Handling"],"fullName":"Auth Register API Integration Tests Error Handling should handle timeout gracefully","status":"passed","title":"should handle timeout gracefully","duration":186.4856660000005,"failureMessages":[],"location":{"line":968,"column":5},"meta":{}},{"ancestorTitles":["Auth Register API Integration Tests","Edge Cases"],"fullName":"Auth Register API Integration Tests Edge Cases should handle very long passwords","status":"passed","title":"should handle very long passwords","duration":663.3097500000003,"failureMessages":[],"location":{"line":980,"column":5},"meta":{}},{"ancestorTitles":["Auth Register API Integration Tests","Edge Cases"],"fullName":"Auth Register API Integration Tests Edge Cases should handle special characters in password","status":"passed","title":"should handle special characters in password","duration":681.2441659999968,"failureMessages":[],"location":{"line":994,"column":5},"meta":{}},{"ancestorTitles":["Auth Register API Integration Tests","Edge Cases"],"fullName":"Auth Register API Integration Tests Edge Cases should handle unicode characters in name","status":"passed","title":"should handle unicode characters in name","duration":895.6377500000017,"failureMessages":[],"location":{"line":1007,"column":5},"meta":{}},{"ancestorTitles":["Auth Register API Integration Tests","Edge Cases"],"fullName":"Auth Register API Integration Tests Edge Cases should handle very long names","status":"passed","title":"should handle very long names","duration":665.5357500000027,"failureMessages":[],"location":{"line":1026,"column":5},"meta":{}},{"ancestorTitles":["Auth Register API Integration Tests","Edge Cases"],"fullName":"Auth Register API Integration Tests Edge Cases should handle email with plus addressing","status":"passed","title":"should handle email with plus addressing","duration":740.1278749999983,"failureMessages":[],"location":{"line":1039,"column":5},"meta":{}},{"ancestorTitles":["Auth Register API Integration Tests","Edge Cases"],"fullName":"Auth Register API Integration Tests Edge Cases should handle email with subdomain","status":"passed","title":"should handle email with subdomain","duration":714.4257090000028,"failureMessages":[],"location":{"line":1050,"column":5},"meta":{}},{"ancestorTitles":["Auth Register API Integration Tests","Edge Cases"],"fullName":"Auth Register API Integration Tests Edge Cases should handle null name gracefully","status":"passed","title":"should handle null name gracefully","duration":696.528333000002,"failureMessages":[],"location":{"line":1061,"column":5},"meta":{}},{"ancestorTitles":["Auth Register API Integration Tests","Retry Logic"],"fullName":"Auth Register API Integration Tests Retry Logic should have retry configuration","status":"passed","title":"should have retry configuration","duration":710.9000420000011,"failureMessages":[],"location":{"line":1087,"column":5},"meta":{}},{"ancestorTitles":["Auth Register API Integration Tests","Retry Logic"],"fullName":"Auth Register API Integration Tests Retry Logic should handle retryable database errors","status":"passed","title":"should handle retryable database errors","duration":193.6656659999935,"failureMessages":[],"location":{"line":1102,"column":5},"meta":{}},{"ancestorTitles":["Auth Register API Integration Tests","HTTP Methods"],"fullName":"Auth Register API Integration Tests HTTP Methods should support OPTIONS for CORS","status":"passed","title":"should support OPTIONS for CORS","duration":192.96666699999332,"failureMessages":[],"location":{"line":1114,"column":5},"meta":{}},{"ancestorTitles":["Auth Register API Integration Tests","HTTP Methods"],"fullName":"Auth Register API Integration Tests HTTP Methods should reject GET requests","status":"passed","title":"should reject GET requests","duration":195.03254200000083,"failureMessages":[],"location":{"line":1132,"column":5},"meta":{}},{"ancestorTitles":["Auth Register API Integration Tests","HTTP Methods"],"fullName":"Auth Register API Integration Tests HTTP Methods should reject PUT requests","status":"passed","title":"should reject PUT requests","duration":695.6362499999959,"failureMessages":[],"location":{"line":1141,"column":5},"meta":{}}],"startTime":1763743281490,"endTime":1763743327475.6362,"status":"failed","message":"","name":"/Users/765h/Huntaze/tests/integration/api/auth-register.integration.test.ts"},{"assertionResults":[{"ancestorTitles":["CSRF Token API Integration Tests","Success Cases"],"fullName":"CSRF Token API Integration Tests Success Cases should return 200 with valid CSRF token","status":"passed","title":"should return 200 with valid CSRF token","duration":584.5012080000015,"failureMessages":[],"location":{"line":159,"column":5},"meta":{}},{"ancestorTitles":["CSRF Token API Integration Tests","Success Cases"],"fullName":"CSRF Token API Integration Tests Success Cases should return token with minimum length of 32 characters","status":"passed","title":"should return token with minimum length of 32 characters","duration":573.621916,"failureMessages":[],"location":{"line":176,"column":5},"meta":{}},{"ancestorTitles":["CSRF Token API Integration Tests","Success Cases"],"fullName":"CSRF Token API Integration Tests Success Cases should return unique tokens for each request","status":"passed","title":"should return unique tokens for each request","duration":573.3782500000016,"failureMessages":[],"location":{"line":187,"column":5},"meta":{}},{"ancestorTitles":["CSRF Token API Integration Tests","Success Cases"],"fullName":"CSRF Token API Integration Tests Success Cases should include correlation ID in headers","status":"passed","title":"should include correlation ID in headers","duration":578.5314579999977,"failureMessages":[],"location":{"line":203,"column":5},"meta":{}},{"ancestorTitles":["CSRF Token API Integration Tests","Success Cases"],"fullName":"CSRF Token API Integration Tests Success Cases should include duration in headers","status":"passed","title":"should include duration in headers","duration":590.473582999999,"failureMessages":[],"location":{"line":214,"column":5},"meta":{}},{"ancestorTitles":["CSRF Token API Integration Tests","Authentication Failures"],"fullName":"CSRF Token API Integration Tests Authentication Failures should return 401 without session","status":"passed","title":"should return 401 without session","duration":663.7187080000003,"failureMessages":[],"location":{"line":231,"column":5},"meta":{}},{"ancestorTitles":["CSRF Token API Integration Tests","Authentication Failures"],"fullName":"CSRF Token API Integration Tests Authentication Failures should return 401 with invalid session","status":"passed","title":"should return 401 with invalid session","duration":571.5511249999981,"failureMessages":[],"location":{"line":241,"column":5},"meta":{}},{"ancestorTitles":["CSRF Token API Integration Tests","Authentication Failures"],"fullName":"CSRF Token API Integration Tests Authentication Failures should include correlation ID in unauthorized responses","status":"passed","title":"should include correlation ID in unauthorized responses","duration":576.9971669999977,"failureMessages":[],"location":{"line":251,"column":5},"meta":{}},{"ancestorTitles":["CSRF Token API Integration Tests","Token Format"],"fullName":"CSRF Token API Integration Tests Token Format should return hexadecimal token","status":"passed","title":"should return hexadecimal token","duration":618.3802080000023,"failureMessages":[],"location":{"line":265,"column":5},"meta":{}},{"ancestorTitles":["CSRF Token API Integration Tests","Token Format"],"fullName":"CSRF Token API Integration Tests Token Format should return token with consistent length","status":"passed","title":"should return token with consistent length","duration":573.9944590000014,"failureMessages":[],"location":{"line":277,"column":5},"meta":{}},{"ancestorTitles":["CSRF Token API Integration Tests","Concurrent Access"],"fullName":"CSRF Token API Integration Tests Concurrent Access should handle concurrent requests without errors","status":"passed","title":"should handle concurrent requests without errors","duration":589.7537919999959,"failureMessages":[],"location":{"line":302,"column":5},"meta":{}},{"ancestorTitles":["CSRF Token API Integration Tests","Concurrent Access"],"fullName":"CSRF Token API Integration Tests Concurrent Access should return unique tokens for concurrent requests","status":"passed","title":"should return unique tokens for concurrent requests","duration":572.5384579999954,"failureMessages":[],"location":{"line":317,"column":5},"meta":{}},{"ancestorTitles":["CSRF Token API Integration Tests","Concurrent Access"],"fullName":"CSRF Token API Integration Tests Concurrent Access should maintain consistent response structure under load","status":"passed","title":"should maintain consistent response structure under load","duration":574.8889170000039,"failureMessages":[],"location":{"line":336,"column":5},"meta":{}},{"ancestorTitles":["CSRF Token API Integration Tests","Performance"],"fullName":"CSRF Token API Integration Tests Performance should respond within 100ms","status":"passed","title":"should respond within 100ms","duration":569.2853329999998,"failureMessages":[],"location":{"line":361,"column":5},"meta":{}},{"ancestorTitles":["CSRF Token API Integration Tests","Performance"],"fullName":"CSRF Token API Integration Tests Performance should maintain performance under sequential load","status":"passed","title":"should maintain performance under sequential load","duration":607.1683330000014,"failureMessages":[],"location":{"line":374,"column":5},"meta":{}},{"ancestorTitles":["CSRF Token API Integration Tests","Error Handling"],"fullName":"CSRF Token API Integration Tests Error Handling should return user-friendly error messages","status":"passed","title":"should return user-friendly error messages","duration":660.3625000000029,"failureMessages":[],"location":{"line":401,"column":5},"meta":{}},{"ancestorTitles":["CSRF Token API Integration Tests","Error Handling"],"fullName":"CSRF Token API Integration Tests Error Handling should include correlation ID for debugging","status":"passed","title":"should include correlation ID for debugging","duration":621.2113329999993,"failureMessages":[],"location":{"line":414,"column":5},"meta":{}},{"ancestorTitles":["CSRF Token API Integration Tests","User Isolation"],"fullName":"CSRF Token API Integration Tests User Isolation should generate different tokens for different users","status":"failed","title":"should generate different tokens for different users","duration":1269.1019589999996,"failureMessages":["PrismaClientKnownRequestError: \nInvalid `prisma.user.delete()` invocation in\n/Users/765h/Huntaze/tests/integration/api/csrf-token.integration.test.ts:458:25\n\n  455 expect(data1.data.token).not.toBe(data2.data.token);\n  456 \n  457 // Cleanup\n→ 458 await prisma.user.delete(\nAn operation failed because it depends on one or more records that were required but not found. No record was found for a delete.\n    at ei.handleRequestError (/Users/765h/Huntaze/node_modules/@prisma/client/runtime/library.js:121:7268)\n    at ei.handleAndLogRequestError (/Users/765h/Huntaze/node_modules/@prisma/client/runtime/library.js:121:6593)\n    at ei.request (/Users/765h/Huntaze/node_modules/@prisma/client/runtime/library.js:121:6300)\n    at a (/Users/765h/Huntaze/node_modules/@prisma/client/runtime/library.js:130:9551)\n    at /Users/765h/Huntaze/tests/integration/api/csrf-token.integration.test.ts:458:7\n    at file:///Users/765h/Huntaze/node_modules/@vitest/runner/dist/index.js:753:20"],"location":{"line":429,"column":5},"meta":{}},{"ancestorTitles":["CSRF Token API Integration Tests","HTTP Methods"],"fullName":"CSRF Token API Integration Tests HTTP Methods should support GET method","status":"passed","title":"should support GET method","duration":595.1452499999941,"failureMessages":[],"location":{"line":467,"column":5},"meta":{}},{"ancestorTitles":["CSRF Token API Integration Tests","HTTP Methods"],"fullName":"CSRF Token API Integration Tests HTTP Methods should return 405 for unsupported methods","status":"passed","title":"should return 405 for unsupported methods","duration":566.3709579999995,"failureMessages":[],"location":{"line":476,"column":5},"meta":{}}],"startTime":1763743308794,"endTime":1763743321325.3708,"status":"failed","message":"","name":"/Users/765h/Huntaze/tests/integration/api/csrf-token.integration.test.ts"},{"assertionResults":[{"ancestorTitles":["Home Stats API Integration Tests","Authentication"],"fullName":"Home Stats API Integration Tests Authentication should return 401 without session","status":"passed","title":"should return 401 without session","duration":1942.3495000000003,"failureMessages":[],"location":{"line":173,"column":5},"meta":{}},{"ancestorTitles":["Home Stats API Integration Tests","Authentication"],"fullName":"Home Stats API Integration Tests Authentication should return 401 with invalid session","status":"passed","title":"should return 401 with invalid session","duration":785.1912499999999,"failureMessages":[],"location":{"line":188,"column":5},"meta":{}},{"ancestorTitles":["Home Stats API Integration Tests","Authentication"],"fullName":"Home Stats API Integration Tests Authentication should return 200 with valid session","status":"failed","title":"should return 200 with valid session","duration":1137.822083,"failureMessages":["AssertionError: expected 503 to be 200 // Object.is equality\n    at /Users/765h/Huntaze/tests/integration/api/home-stats.integration.test.ts:203:31\n    at file:///Users/765h/Huntaze/node_modules/@vitest/runner/dist/index.js:753:20"],"location":{"line":198,"column":5},"meta":{}},{"ancestorTitles":["Home Stats API Integration Tests","Authentication"],"fullName":"Home Stats API Integration Tests Authentication should include correlation ID in unauthorized responses","status":"passed","title":"should include correlation ID in unauthorized responses","duration":759.417708,"failureMessages":[],"location":{"line":206,"column":5},"meta":{}},{"ancestorTitles":["Home Stats API Integration Tests","Success Cases"],"fullName":"Home Stats API Integration Tests Success Cases should return 200 with valid stats","status":"passed","title":"should return 200 with valid stats","duration":944.1164170000002,"failureMessages":[],"location":{"line":220,"column":5},"meta":{}},{"ancestorTitles":["Home Stats API Integration Tests","Success Cases"],"fullName":"Home Stats API Integration Tests Success Cases should return all required stat fields","status":"passed","title":"should return all required stat fields","duration":945.3461249999991,"failureMessages":[],"location":{"line":240,"column":5},"meta":{}},{"ancestorTitles":["Home Stats API Integration Tests","Success Cases"],"fullName":"Home Stats API Integration Tests Success Cases should return correct stat values","status":"failed","title":"should return correct stat values","duration":1042.6129170000013,"failureMessages":["TypeError: Cannot read properties of undefined (reading 'messagesSent')\n    at /Users/765h/Huntaze/tests/integration/api/home-stats.integration.test.ts:268:24\n    at file:///Users/765h/Huntaze/node_modules/@vitest/runner/dist/index.js:753:20"],"location":{"line":259,"column":5},"meta":{}},{"ancestorTitles":["Home Stats API Integration Tests","Success Cases"],"fullName":"Home Stats API Integration Tests Success Cases should create default stats for new users","status":"passed","title":"should create default stats for new users","duration":1056.4935420000002,"failureMessages":[],"location":{"line":278,"column":5},"meta":{}},{"ancestorTitles":["Home Stats API Integration Tests","Success Cases"],"fullName":"Home Stats API Integration Tests Success Cases should include duration in response","status":"passed","title":"should include duration in response","duration":949.6458750000002,"failureMessages":[],"location":{"line":307,"column":5},"meta":{}},{"ancestorTitles":["Home Stats API Integration Tests","Success Cases"],"fullName":"Home Stats API Integration Tests Success Cases should include correlation ID","status":"passed","title":"should include correlation ID","duration":1255.732,"failureMessages":[],"location":{"line":326,"column":5},"meta":{}},{"ancestorTitles":["Home Stats API Integration Tests","Cache Behavior"],"fullName":"Home Stats API Integration Tests Cache Behavior should cache stats for subsequent requests","status":"passed","title":"should cache stats for subsequent requests","duration":947.9222500000014,"failureMessages":[],"location":{"line":352,"column":5},"meta":{}},{"ancestorTitles":["Home Stats API Integration Tests","Cache Behavior"],"fullName":"Home Stats API Integration Tests Cache Behavior should expire cache after 60 seconds","status":"failed","title":"should expire cache after 60 seconds","duration":870.2655829999985,"failureMessages":["PrismaClientKnownRequestError: \nInvalid `prisma.userStats.create()` invocation in\n/Users/765h/Huntaze/tests/integration/api/home-stats.integration.test.ts:101:33\n\n   98  * Create user stats in database\n   99  */\n  100 async function createUserStats(userId: number, stats = MOCK_STATS) {\n→ 101   return await prisma.userStats.create(\nForeign key constraint violated on the constraint: `user_stats_user_id_fkey`\n    at ei.handleRequestError (/Users/765h/Huntaze/node_modules/@prisma/client/runtime/library.js:121:7268)\n    at ei.handleAndLogRequestError (/Users/765h/Huntaze/node_modules/@prisma/client/runtime/library.js:121:6593)\n    at ei.request (/Users/765h/Huntaze/node_modules/@prisma/client/runtime/library.js:121:6300)\n    at a (/Users/765h/Huntaze/node_modules/@prisma/client/runtime/library.js:130:9551)\n    at createUserStats (/Users/765h/Huntaze/tests/integration/api/home-stats.integration.test.ts:101:10)\n    at /Users/765h/Huntaze/tests/integration/api/home-stats.integration.test.ts:381:7\n    at file:///Users/765h/Huntaze/node_modules/@vitest/runner/dist/index.js:753:20"],"location":{"line":380,"column":5},"meta":{}},{"ancestorTitles":["Home Stats API Integration Tests","Cache Behavior"],"fullName":"Home Stats API Integration Tests Cache Behavior should include Cache-Control header","status":"failed","title":"should include Cache-Control header","duration":869.6507089999996,"failureMessages":["PrismaClientKnownRequestError: \nInvalid `prisma.userStats.create()` invocation in\n/Users/765h/Huntaze/tests/integration/api/home-stats.integration.test.ts:101:33\n\n   98  * Create user stats in database\n   99  */\n  100 async function createUserStats(userId: number, stats = MOCK_STATS) {\n→ 101   return await prisma.userStats.create(\nForeign key constraint violated on the constraint: `user_stats_user_id_fkey`\n    at ei.handleRequestError (/Users/765h/Huntaze/node_modules/@prisma/client/runtime/library.js:121:7268)\n    at ei.handleAndLogRequestError (/Users/765h/Huntaze/node_modules/@prisma/client/runtime/library.js:121:6593)\n    at ei.request (/Users/765h/Huntaze/node_modules/@prisma/client/runtime/library.js:121:6300)\n    at a (/Users/765h/Huntaze/node_modules/@prisma/client/runtime/library.js:130:9551)\n    at createUserStats (/Users/765h/Huntaze/tests/integration/api/home-stats.integration.test.ts:101:10)\n    at /Users/765h/Huntaze/tests/integration/api/home-stats.integration.test.ts:412:7\n    at file:///Users/765h/Huntaze/node_modules/@vitest/runner/dist/index.js:753:20"],"location":{"line":411,"column":5},"meta":{}},{"ancestorTitles":["Home Stats API Integration Tests","Cache Behavior"],"fullName":"Home Stats API Integration Tests Cache Behavior should serve cached data faster","status":"failed","title":"should serve cached data faster","duration":855.1041249999998,"failureMessages":["PrismaClientKnownRequestError: \nInvalid `prisma.userStats.create()` invocation in\n/Users/765h/Huntaze/tests/integration/api/home-stats.integration.test.ts:101:33\n\n   98  * Create user stats in database\n   99  */\n  100 async function createUserStats(userId: number, stats = MOCK_STATS) {\n→ 101   return await prisma.userStats.create(\nForeign key constraint violated on the constraint: `user_stats_user_id_fkey`\n    at ei.handleRequestError (/Users/765h/Huntaze/node_modules/@prisma/client/runtime/library.js:121:7268)\n    at ei.handleAndLogRequestError (/Users/765h/Huntaze/node_modules/@prisma/client/runtime/library.js:121:6593)\n    at ei.request (/Users/765h/Huntaze/node_modules/@prisma/client/runtime/library.js:121:6300)\n    at a (/Users/765h/Huntaze/node_modules/@prisma/client/runtime/library.js:130:9551)\n    at createUserStats (/Users/765h/Huntaze/tests/integration/api/home-stats.integration.test.ts:101:10)\n    at /Users/765h/Huntaze/tests/integration/api/home-stats.integration.test.ts:425:7\n    at file:///Users/765h/Huntaze/node_modules/@vitest/runner/dist/index.js:753:20"],"location":{"line":424,"column":5},"meta":{}},{"ancestorTitles":["Home Stats API Integration Tests","Performance"],"fullName":"Home Stats API Integration Tests Performance should respond within 500ms (p95 target)","status":"failed","title":"should respond within 500ms (p95 target)","duration":861.8354999999992,"failureMessages":["PrismaClientKnownRequestError: \nInvalid `prisma.userStats.create()` invocation in\n/Users/765h/Huntaze/tests/integration/api/home-stats.integration.test.ts:101:33\n\n   98  * Create user stats in database\n   99  */\n  100 async function createUserStats(userId: number, stats = MOCK_STATS) {\n→ 101   return await prisma.userStats.create(\nForeign key constraint violated on the constraint: `user_stats_user_id_fkey`\n    at ei.handleRequestError (/Users/765h/Huntaze/node_modules/@prisma/client/runtime/library.js:121:7268)\n    at ei.handleAndLogRequestError (/Users/765h/Huntaze/node_modules/@prisma/client/runtime/library.js:121:6593)\n    at ei.request (/Users/765h/Huntaze/node_modules/@prisma/client/runtime/library.js:121:6300)\n    at a (/Users/765h/Huntaze/node_modules/@prisma/client/runtime/library.js:130:9551)\n    at createUserStats (/Users/765h/Huntaze/tests/integration/api/home-stats.integration.test.ts:101:10)\n    at /Users/765h/Huntaze/tests/integration/api/home-stats.integration.test.ts:458:7\n    at file:///Users/765h/Huntaze/node_modules/@vitest/runner/dist/index.js:753:20"],"location":{"line":457,"column":5},"meta":{}},{"ancestorTitles":["Home Stats API Integration Tests","Performance"],"fullName":"Home Stats API Integration Tests Performance should handle 10 concurrent requests efficiently","status":"failed","title":"should handle 10 concurrent requests efficiently","duration":2295.913041,"failureMessages":["AssertionError: expected 503 to be 200 // Object.is equality\n    at /Users/765h/Huntaze/tests/integration/api/home-stats.integration.test.ts:478:33\n    at file:///Users/765h/Huntaze/node_modules/@vitest/runner/dist/index.js:753:20"],"location":{"line":469,"column":5},"meta":{}},{"ancestorTitles":["Home Stats API Integration Tests","Performance"],"fullName":"Home Stats API Integration Tests Performance should maintain performance under load","status":"failed","title":"should maintain performance under load","duration":10614.394834000002,"failureMessages":["TypeError: actual value must be number or bigint, received \"undefined\"\n    at assertTypes (file:///Users/765h/Huntaze/node_modules/@vitest/utils/dist/helpers.js:56:9)\n    at Proxy.<anonymous> (file:///Users/765h/Huntaze/node_modules/@vitest/expect/dist/index.js:1283:3)\n    at Proxy.<anonymous> (file:///Users/765h/Huntaze/node_modules/@vitest/expect/dist/index.js:1090:14)\n    at Proxy.methodWrapper (file:///Users/765h/Huntaze/node_modules/chai/index.js:1700:25)\n    at /Users/765h/Huntaze/tests/integration/api/home-stats.integration.test.ts:505:27\n    at file:///Users/765h/Huntaze/node_modules/@vitest/runner/dist/index.js:753:20"],"location":{"line":485,"column":5},"meta":{}},{"ancestorTitles":["Home Stats API Integration Tests","Concurrent Access"],"fullName":"Home Stats API Integration Tests Concurrent Access should handle concurrent requests without race conditions","status":"passed","title":"should handle concurrent requests without race conditions","duration":1136.262917,"failureMessages":[],"location":{"line":514,"column":5},"meta":{}},{"ancestorTitles":["Home Stats API Integration Tests","Concurrent Access"],"fullName":"Home Stats API Integration Tests Concurrent Access should maintain data consistency","status":"passed","title":"should maintain data consistency","duration":1065.3444999999992,"failureMessages":[],"location":{"line":535,"column":5},"meta":{}},{"ancestorTitles":["Home Stats API Integration Tests","Data Integrity"],"fullName":"Home Stats API Integration Tests Data Integrity should have non-negative values for counts","status":"passed","title":"should have non-negative values for counts","duration":967.7977500000015,"failureMessages":[],"location":{"line":556,"column":5},"meta":{}},{"ancestorTitles":["Home Stats API Integration Tests","Data Integrity"],"fullName":"Home Stats API Integration Tests Data Integrity should have response rate within 0-100 range","status":"passed","title":"should have response rate within 0-100 range","duration":1051.677749999999,"failureMessages":[],"location":{"line":570,"column":5},"meta":{}},{"ancestorTitles":["Home Stats API Integration Tests","Data Integrity"],"fullName":"Home Stats API Integration Tests Data Integrity should allow negative trend values","status":"passed","title":"should allow negative trend values","duration":945.5217080000002,"failureMessages":[],"location":{"line":583,"column":5},"meta":{}},{"ancestorTitles":["Home Stats API Integration Tests","Data Integrity"],"fullName":"Home Stats API Integration Tests Data Integrity should return integers for count fields","status":"passed","title":"should return integers for count fields","duration":942.9206669999985,"failureMessages":[],"location":{"line":601,"column":5},"meta":{}},{"ancestorTitles":["Home Stats API Integration Tests","Error Handling"],"fullName":"Home Stats API Integration Tests Error Handling should return 503 for non-existent user (database constraint)","status":"passed","title":"should return 503 for non-existent user (database constraint)","duration":1133.3797919999997,"failureMessages":[],"location":{"line":620,"column":5},"meta":{}},{"ancestorTitles":["Home Stats API Integration Tests","Error Handling"],"fullName":"Home Stats API Integration Tests Error Handling should include correlation ID in error responses","status":"passed","title":"should include correlation ID in error responses","duration":1036.9400830000013,"failureMessages":[],"location":{"line":639,"column":5},"meta":{}},{"ancestorTitles":["Home Stats API Integration Tests","User Isolation"],"fullName":"Home Stats API Integration Tests User Isolation should only return stats for authenticated user","status":"failed","title":"should only return stats for authenticated user","duration":1534.8370419999992,"failureMessages":["TypeError: Cannot read properties of undefined (reading 'messagesSent')\n    at /Users/765h/Huntaze/tests/integration/api/home-stats.integration.test.ts:686:24\n    at file:///Users/765h/Huntaze/node_modules/@vitest/runner/dist/index.js:753:20"],"location":{"line":659,"column":5},"meta":{}}],"startTime":1763743281430,"endTime":1763743319377.8372,"status":"failed","message":"","name":"/Users/765h/Huntaze/tests/integration/api/home-stats.integration.test.ts"},{"assertionResults":[{"ancestorTitles":["Integrations Callback API Integration Tests","Success Cases"],"fullName":"Integrations Callback API Integration Tests Success Cases should redirect to integrations page on success","status":"failed","title":"should redirect to integrations page on success","duration":760.9987919999985,"failureMessages":["AssertionError: expected 'http://localhost:3000/integrations?er…' to contain 'success=true'\n    at /Users/765h/Huntaze/tests/integration/api/integrations-callback.integration.test.ts:199:24\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at file:///Users/765h/Huntaze/node_modules/@vitest/runner/dist/index.js:753:20"],"location":{"line":189,"column":5},"meta":{}},{"ancestorTitles":["Integrations Callback API Integration Tests","Success Cases"],"fullName":"Integrations Callback API Integration Tests Success Cases should include account ID in redirect URL","status":"failed","title":"should include account ID in redirect URL","duration":766.6792920000007,"failureMessages":["AssertionError: expected 'http://localhost:3000/integrations?er…' to contain 'account='\n    at /Users/765h/Huntaze/tests/integration/api/integrations-callback.integration.test.ts:210:24\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at file:///Users/765h/Huntaze/node_modules/@vitest/runner/dist/index.js:753:20"],"location":{"line":203,"column":5},"meta":{}},{"ancestorTitles":["Integrations Callback API Integration Tests","Success Cases"],"fullName":"Integrations Callback API Integration Tests Success Cases should invalidate integration cache on success","status":"failed","title":"should invalidate integration cache on success","duration":759.8638750000027,"failureMessages":["AssertionError: expected true to be false // Object.is equality\n    at /Users/765h/Huntaze/tests/integration/api/integrations-callback.integration.test.ts:227:42\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at file:///Users/765h/Huntaze/node_modules/@vitest/runner/dist/index.js:753:20"],"location":{"line":213,"column":5},"meta":{}},{"ancestorTitles":["Integrations Callback API Integration Tests","OAuth Error Handling"],"fullName":"Integrations Callback API Integration Tests OAuth Error Handling should redirect with error when user cancels","status":"passed","title":"should redirect with error when user cancels","duration":752.0360419999997,"failureMessages":[],"location":{"line":236,"column":5},"meta":{}},{"ancestorTitles":["Integrations Callback API Integration Tests","OAuth Error Handling"],"fullName":"Integrations Callback API Integration Tests OAuth Error Handling should redirect with error for OAuth errors","status":"passed","title":"should redirect with error for OAuth errors","duration":767.3789580000011,"failureMessages":[],"location":{"line":254,"column":5},"meta":{}},{"ancestorTitles":["Integrations Callback API Integration Tests","Validation Errors"],"fullName":"Integrations Callback API Integration Tests Validation Errors should redirect with error for invalid provider","status":"passed","title":"should redirect with error for invalid provider","duration":861.7530409999999,"failureMessages":[],"location":{"line":278,"column":5},"meta":{}},{"ancestorTitles":["Integrations Callback API Integration Tests","Validation Errors"],"fullName":"Integrations Callback API Integration Tests Validation Errors should redirect with error for missing code","status":"passed","title":"should redirect with error for missing code","duration":758.0682919999963,"failureMessages":[],"location":{"line":291,"column":5},"meta":{}},{"ancestorTitles":["Integrations Callback API Integration Tests","Validation Errors"],"fullName":"Integrations Callback API Integration Tests Validation Errors should redirect with error for missing state","status":"passed","title":"should redirect with error for missing state","duration":808.8752920000043,"failureMessages":[],"location":{"line":303,"column":5},"meta":{}},{"ancestorTitles":["Integrations Callback API Integration Tests","CSRF Protection"],"fullName":"Integrations Callback API Integration Tests CSRF Protection should reject invalid state parameter","status":"passed","title":"should reject invalid state parameter","duration":752.8189999999959,"failureMessages":[],"location":{"line":321,"column":5},"meta":{}},{"ancestorTitles":["Integrations Callback API Integration Tests","CSRF Protection"],"fullName":"Integrations Callback API Integration Tests CSRF Protection should reject expired state parameter","status":"passed","title":"should reject expired state parameter","duration":759.8846659999981,"failureMessages":[],"location":{"line":334,"column":5},"meta":{}},{"ancestorTitles":["Integrations Callback API Integration Tests","Provider-Specific Flows"],"fullName":"Integrations Callback API Integration Tests Provider-Specific Flows should handle Instagram callback","status":"passed","title":"should handle Instagram callback","duration":754.8796250000014,"failureMessages":[],"location":{"line":359,"column":5},"meta":{}},{"ancestorTitles":["Integrations Callback API Integration Tests","Provider-Specific Flows"],"fullName":"Integrations Callback API Integration Tests Provider-Specific Flows should handle TikTok callback","status":"passed","title":"should handle TikTok callback","duration":755.1988330000022,"failureMessages":[],"location":{"line":371,"column":5},"meta":{}},{"ancestorTitles":["Integrations Callback API Integration Tests","Provider-Specific Flows"],"fullName":"Integrations Callback API Integration Tests Provider-Specific Flows should handle Reddit callback","status":"passed","title":"should handle Reddit callback","duration":759.4851249999992,"failureMessages":[],"location":{"line":383,"column":5},"meta":{}},{"ancestorTitles":["Integrations Callback API Integration Tests","Provider-Specific Flows"],"fullName":"Integrations Callback API Integration Tests Provider-Specific Flows should handle OnlyFans callback","status":"passed","title":"should handle OnlyFans callback","duration":795.1975840000014,"failureMessages":[],"location":{"line":395,"column":5},"meta":{}},{"ancestorTitles":["Integrations Callback API Integration Tests","Error Handling"],"fullName":"Integrations Callback API Integration Tests Error Handling should redirect with error for invalid authorization code","status":"passed","title":"should redirect with error for invalid authorization code","duration":785.4057919999977,"failureMessages":[],"location":{"line":413,"column":5},"meta":{}},{"ancestorTitles":["Integrations Callback API Integration Tests","Error Handling"],"fullName":"Integrations Callback API Integration Tests Error Handling should redirect with error for OAuth callback errors","status":"passed","title":"should redirect with error for OAuth callback errors","duration":778.4497080000001,"failureMessages":[],"location":{"line":426,"column":5},"meta":{}},{"ancestorTitles":["Integrations Callback API Integration Tests","Redirect Behavior"],"fullName":"Integrations Callback API Integration Tests Redirect Behavior should always redirect to integrations page","status":"passed","title":"should always redirect to integrations page","duration":747.1719169999997,"failureMessages":[],"location":{"line":445,"column":5},"meta":{}},{"ancestorTitles":["Integrations Callback API Integration Tests","Redirect Behavior"],"fullName":"Integrations Callback API Integration Tests Redirect Behavior should include provider in redirect URL","status":"passed","title":"should include provider in redirect URL","duration":768.1058750000011,"failureMessages":[],"location":{"line":457,"column":5},"meta":{}},{"ancestorTitles":["Integrations Callback API Integration Tests","Redirect Behavior"],"fullName":"Integrations Callback API Integration Tests Redirect Behavior should use 302 status code for redirects","status":"passed","title":"should use 302 status code for redirects","duration":748.059583000002,"failureMessages":[],"location":{"line":467,"column":5},"meta":{}},{"ancestorTitles":["Integrations Callback API Integration Tests","Performance"],"fullName":"Integrations Callback API Integration Tests Performance should respond within 2 seconds","status":"passed","title":"should respond within 2 seconds","duration":772.6030419999952,"failureMessages":[],"location":{"line":482,"column":5},"meta":{}},{"ancestorTitles":["Integrations Callback API Integration Tests","Audit Logging"],"fullName":"Integrations Callback API Integration Tests Audit Logging should log callback with IP and user agent","status":"passed","title":"should log callback with IP and user agent","duration":798.965375000007,"failureMessages":[],"location":{"line":501,"column":5},"meta":{}},{"ancestorTitles":["Integrations Callback API Integration Tests","Concurrent Callbacks"],"fullName":"Integrations Callback API Integration Tests Concurrent Callbacks should handle multiple callbacks for different providers","status":"passed","title":"should handle multiple callbacks for different providers","duration":744.0461660000001,"failureMessages":[],"location":{"line":519,"column":5},"meta":{}}],"startTime":1763743307975,"endTime":1763743324931.0461,"status":"failed","message":"","name":"/Users/765h/Huntaze/tests/integration/api/integrations-callback.integration.test.ts"},{"assertionResults":[{"ancestorTitles":["Integrations Disconnect API Integration Tests","Success Cases"],"fullName":"Integrations Disconnect API Integration Tests Success Cases should return 200 with valid disconnect request","status":"failed","title":"should return 200 with valid disconnect request","duration":3032.714625,"failureMessages":["AssertionError: expected 404 to be 200 // Object.is equality\n    at /Users/765h/Huntaze/tests/integration/api/integrations-disconnect.integration.test.ts:229:31\n    at file:///Users/765h/Huntaze/node_modules/@vitest/runner/dist/index.js:753:20"],"location":{"line":221,"column":5},"meta":{}},{"ancestorTitles":["Integrations Disconnect API Integration Tests","Success Cases"],"fullName":"Integrations Disconnect API Integration Tests Success Cases should delete integration from database","status":"passed","title":"should delete integration from database","duration":1386.5223340000002,"failureMessages":[],"location":{"line":241,"column":5},"meta":{}},{"ancestorTitles":["Integrations Disconnect API Integration Tests","Success Cases"],"fullName":"Integrations Disconnect API Integration Tests Success Cases should return provider and accountId in response","status":"failed","title":"should return provider and accountId in response","duration":845.6339999999991,"failureMessages":["PrismaClientKnownRequestError: \nInvalid `prisma.oAuthAccount.create()` invocation in\n/Users/765h/Huntaze/tests/integration/api/integrations-disconnect.integration.test.ts:94:36\n\n  91  * Create test integration\n  92  */\n  93 async function createTestIntegration(userId: number) {\n→ 94   return await prisma.oAuthAccount.create(\nForeign key constraint violated on the constraint: `oauth_accounts_user_id_fkey`\n    at ei.handleRequestError (/Users/765h/Huntaze/node_modules/@prisma/client/runtime/library.js:121:7268)\n    at ei.handleAndLogRequestError (/Users/765h/Huntaze/node_modules/@prisma/client/runtime/library.js:121:6593)\n    at ei.request (/Users/765h/Huntaze/node_modules/@prisma/client/runtime/library.js:121:6300)\n    at a (/Users/765h/Huntaze/node_modules/@prisma/client/runtime/library.js:130:9551)\n    at createTestIntegration (/Users/765h/Huntaze/tests/integration/api/integrations-disconnect.integration.test.ts:94:10)\n    at /Users/765h/Huntaze/tests/integration/api/integrations-disconnect.integration.test.ts:202:23"],"location":{"line":260,"column":5},"meta":{}},{"ancestorTitles":["Integrations Disconnect API Integration Tests","Success Cases"],"fullName":"Integrations Disconnect API Integration Tests Success Cases should invalidate integration cache","status":"passed","title":"should invalidate integration cache","duration":1075.6655419999997,"failureMessages":[],"location":{"line":274,"column":5},"meta":{}},{"ancestorTitles":["Integrations Disconnect API Integration Tests","Success Cases"],"fullName":"Integrations Disconnect API Integration Tests Success Cases should include success message","status":"failed","title":"should include success message","duration":1090.0788329999996,"failureMessages":["AssertionError: expected undefined to be defined\n    at /Users/765h/Huntaze/tests/integration/api/integrations-disconnect.integration.test.ts:304:28\n    at file:///Users/765h/Huntaze/node_modules/@vitest/runner/dist/index.js:753:20"],"location":{"line":294,"column":5},"meta":{}},{"ancestorTitles":["Integrations Disconnect API Integration Tests","Authentication Failures"],"fullName":"Integrations Disconnect API Integration Tests Authentication Failures should return 401 without session","status":"passed","title":"should return 401 without session","duration":968.6757500000003,"failureMessages":[],"location":{"line":315,"column":5},"meta":{}},{"ancestorTitles":["Integrations Disconnect API Integration Tests","Authentication Failures"],"fullName":"Integrations Disconnect API Integration Tests Authentication Failures should return 401 with invalid session","status":"passed","title":"should return 401 with invalid session","duration":897.2594579999986,"failureMessages":[],"location":{"line":329,"column":5},"meta":{}},{"ancestorTitles":["Integrations Disconnect API Integration Tests","CSRF Protection"],"fullName":"Integrations Disconnect API Integration Tests CSRF Protection should return 403 without CSRF token","status":"passed","title":"should return 403 without CSRF token","duration":1163.2885420000002,"failureMessages":[],"location":{"line":346,"column":5},"meta":{}},{"ancestorTitles":["Integrations Disconnect API Integration Tests","CSRF Protection"],"fullName":"Integrations Disconnect API Integration Tests CSRF Protection should return 403 with invalid CSRF token","status":"failed","title":"should return 403 with invalid CSRF token","duration":845.7478749999991,"failureMessages":["PrismaClientKnownRequestError: \nInvalid `prisma.oAuthAccount.create()` invocation in\n/Users/765h/Huntaze/tests/integration/api/integrations-disconnect.integration.test.ts:94:36\n\n  91  * Create test integration\n  92  */\n  93 async function createTestIntegration(userId: number) {\n→ 94   return await prisma.oAuthAccount.create(\nForeign key constraint violated on the constraint: `oauth_accounts_user_id_fkey`\n    at ei.handleRequestError (/Users/765h/Huntaze/node_modules/@prisma/client/runtime/library.js:121:7268)\n    at ei.handleAndLogRequestError (/Users/765h/Huntaze/node_modules/@prisma/client/runtime/library.js:121:6593)\n    at ei.request (/Users/765h/Huntaze/node_modules/@prisma/client/runtime/library.js:121:6300)\n    at a (/Users/765h/Huntaze/node_modules/@prisma/client/runtime/library.js:130:9551)\n    at createTestIntegration (/Users/765h/Huntaze/tests/integration/api/integrations-disconnect.integration.test.ts:94:10)\n    at /Users/765h/Huntaze/tests/integration/api/integrations-disconnect.integration.test.ts:202:23"],"location":{"line":360,"column":5},"meta":{}},{"ancestorTitles":["Integrations Disconnect API Integration Tests","CSRF Protection"],"fullName":"Integrations Disconnect API Integration Tests CSRF Protection should not delete integration without valid CSRF token","status":"passed","title":"should not delete integration without valid CSRF token","duration":1258.2721250000013,"failureMessages":[],"location":{"line":374,"column":5},"meta":{}},{"ancestorTitles":["Integrations Disconnect API Integration Tests","Validation Errors"],"fullName":"Integrations Disconnect API Integration Tests Validation Errors should return 400 with invalid provider","status":"failed","title":"should return 400 with invalid provider","duration":857.8951670000006,"failureMessages":["PrismaClientKnownRequestError: \nInvalid `prisma.oAuthAccount.create()` invocation in\n/Users/765h/Huntaze/tests/integration/api/integrations-disconnect.integration.test.ts:94:36\n\n  91  * Create test integration\n  92  */\n  93 async function createTestIntegration(userId: number) {\n→ 94   return await prisma.oAuthAccount.create(\nForeign key constraint violated on the constraint: `oauth_accounts_user_id_fkey`\n    at ei.handleRequestError (/Users/765h/Huntaze/node_modules/@prisma/client/runtime/library.js:121:7268)\n    at ei.handleAndLogRequestError (/Users/765h/Huntaze/node_modules/@prisma/client/runtime/library.js:121:6593)\n    at ei.request (/Users/765h/Huntaze/node_modules/@prisma/client/runtime/library.js:121:6300)\n    at a (/Users/765h/Huntaze/node_modules/@prisma/client/runtime/library.js:130:9551)\n    at createTestIntegration (/Users/765h/Huntaze/tests/integration/api/integrations-disconnect.integration.test.ts:94:10)\n    at /Users/765h/Huntaze/tests/integration/api/integrations-disconnect.integration.test.ts:202:23"],"location":{"line":399,"column":5},"meta":{}},{"ancestorTitles":["Integrations Disconnect API Integration Tests","Validation Errors"],"fullName":"Integrations Disconnect API Integration Tests Validation Errors should return 400 with empty accountId","status":"failed","title":"should return 400 with empty accountId","duration":851.7343330000003,"failureMessages":["PrismaClientKnownRequestError: \nInvalid `prisma.oAuthAccount.create()` invocation in\n/Users/765h/Huntaze/tests/integration/api/integrations-disconnect.integration.test.ts:94:36\n\n  91  * Create test integration\n  92  */\n  93 async function createTestIntegration(userId: number) {\n→ 94   return await prisma.oAuthAccount.create(\nForeign key constraint violated on the constraint: `oauth_accounts_user_id_fkey`\n    at ei.handleRequestError (/Users/765h/Huntaze/node_modules/@prisma/client/runtime/library.js:121:7268)\n    at ei.handleAndLogRequestError (/Users/765h/Huntaze/node_modules/@prisma/client/runtime/library.js:121:6593)\n    at ei.request (/Users/765h/Huntaze/node_modules/@prisma/client/runtime/library.js:121:6300)\n    at a (/Users/765h/Huntaze/node_modules/@prisma/client/runtime/library.js:130:9551)\n    at createTestIntegration (/Users/765h/Huntaze/tests/integration/api/integrations-disconnect.integration.test.ts:94:10)\n    at /Users/765h/Huntaze/tests/integration/api/integrations-disconnect.integration.test.ts:202:23"],"location":{"line":413,"column":5},"meta":{}},{"ancestorTitles":["Integrations Disconnect API Integration Tests","Validation Errors"],"fullName":"Integrations Disconnect API Integration Tests Validation Errors should validate provider against allowed list","status":"failed","title":"should validate provider against allowed list","duration":862.6182090000002,"failureMessages":["PrismaClientKnownRequestError: \nInvalid `prisma.oAuthAccount.create()` invocation in\n/Users/765h/Huntaze/tests/integration/api/integrations-disconnect.integration.test.ts:94:36\n\n  91  * Create test integration\n  92  */\n  93 async function createTestIntegration(userId: number) {\n→ 94   return await prisma.oAuthAccount.create(\nForeign key constraint violated on the constraint: `oauth_accounts_user_id_fkey`\n    at ei.handleRequestError (/Users/765h/Huntaze/node_modules/@prisma/client/runtime/library.js:121:7268)\n    at ei.handleAndLogRequestError (/Users/765h/Huntaze/node_modules/@prisma/client/runtime/library.js:121:6593)\n    at ei.request (/Users/765h/Huntaze/node_modules/@prisma/client/runtime/library.js:121:6300)\n    at a (/Users/765h/Huntaze/node_modules/@prisma/client/runtime/library.js:130:9551)\n    at createTestIntegration (/Users/765h/Huntaze/tests/integration/api/integrations-disconnect.integration.test.ts:94:10)\n    at /Users/765h/Huntaze/tests/integration/api/integrations-disconnect.integration.test.ts:202:23"],"location":{"line":427,"column":5},"meta":{}},{"ancestorTitles":["Integrations Disconnect API Integration Tests","Not Found Cases"],"fullName":"Integrations Disconnect API Integration Tests Not Found Cases should return 404 for non-existent integration","status":"passed","title":"should return 404 for non-existent integration","duration":1172.295167000002,"failureMessages":[],"location":{"line":448,"column":5},"meta":{}},{"ancestorTitles":["Integrations Disconnect API Integration Tests","Not Found Cases"],"fullName":"Integrations Disconnect API Integration Tests Not Found Cases should return 404 for other user's integration","status":"passed","title":"should return 404 for other user's integration","duration":1930.1689159999987,"failureMessages":[],"location":{"line":462,"column":5},"meta":{}},{"ancestorTitles":["Integrations Disconnect API Integration Tests","User Isolation"],"fullName":"Integrations Disconnect API Integration Tests User Isolation should only disconnect user's own integrations","status":"passed","title":"should only disconnect user's own integrations","duration":1867.2371669999993,"failureMessages":[],"location":{"line":495,"column":5},"meta":{}},{"ancestorTitles":["Integrations Disconnect API Integration Tests","Concurrent Access"],"fullName":"Integrations Disconnect API Integration Tests Concurrent Access should handle concurrent disconnect requests","status":"failed","title":"should handle concurrent disconnect requests","duration":1888.4180830000005,"failureMessages":["PrismaClientKnownRequestError: \nInvalid `prisma.oAuthAccount.create()` invocation in\n/Users/765h/Huntaze/tests/integration/api/integrations-disconnect.integration.test.ts:547:29\n\n  544     accessToken: 'token',\n  545   },\n  546 }),\n→ 547 prisma.oAuthAccount.create(\nForeign key constraint violated on the constraint: `oauth_accounts_user_id_fkey`\n    at ei.handleRequestError (/Users/765h/Huntaze/node_modules/@prisma/client/runtime/library.js:121:7268)\n    at ei.handleAndLogRequestError (/Users/765h/Huntaze/node_modules/@prisma/client/runtime/library.js:121:6593)\n    at ei.request (/Users/765h/Huntaze/node_modules/@prisma/client/runtime/library.js:121:6300)\n    at a (/Users/765h/Huntaze/node_modules/@prisma/client/runtime/library.js:130:9551)\n    at async Promise.all (index 1)\n    at /Users/765h/Huntaze/tests/integration/api/integrations-disconnect.integration.test.ts:538:28\n    at file:///Users/765h/Huntaze/node_modules/@vitest/runner/dist/index.js:753:20"],"location":{"line":536,"column":5},"meta":{}},{"ancestorTitles":["Integrations Disconnect API Integration Tests","Performance"],"fullName":"Integrations Disconnect API Integration Tests Performance should respond within 500ms","status":"passed","title":"should respond within 500ms","duration":1297.9145420000023,"failureMessages":[],"location":{"line":588,"column":5},"meta":{}},{"ancestorTitles":["Integrations Disconnect API Integration Tests","Error Handling"],"fullName":"Integrations Disconnect API Integration Tests Error Handling should include correlation ID in responses","status":"passed","title":"should include correlation ID in responses","duration":1832.6810409999998,"failureMessages":[],"location":{"line":609,"column":5},"meta":{}},{"ancestorTitles":["Integrations Disconnect API Integration Tests","Error Handling"],"fullName":"Integrations Disconnect API Integration Tests Error Handling should return user-friendly error messages","status":"passed","title":"should return user-friendly error messages","duration":894.5658749999966,"failureMessages":[],"location":{"line":622,"column":5},"meta":{}},{"ancestorTitles":["Integrations Disconnect API Integration Tests","Audit Logging"],"fullName":"Integrations Disconnect API Integration Tests Audit Logging should log disconnect action with IP and user agent","status":"passed","title":"should log disconnect action with IP and user agent","duration":1278.2649579999998,"failureMessages":[],"location":{"line":644,"column":5},"meta":{}}],"startTime":1763743281474,"endTime":1763743308771.265,"status":"failed","message":"","name":"/Users/765h/Huntaze/tests/integration/api/integrations-disconnect.integration.test.ts"},{"assertionResults":[{"ancestorTitles":["Integrations Refresh API Integration Tests","Success Cases"],"fullName":"Integrations Refresh API Integration Tests Success Cases should return 200 with valid refresh request","status":"failed","title":"should return 200 with valid refresh request","duration":3021.831333,"failureMessages":["AssertionError: expected 404 to be 200 // Object.is equality\n    at /Users/765h/Huntaze/tests/integration/api/integrations-refresh.integration.test.ts:278:31\n    at file:///Users/765h/Huntaze/node_modules/@vitest/runner/dist/index.js:753:20"],"location":{"line":270,"column":5},"meta":{}},{"ancestorTitles":["Integrations Refresh API Integration Tests","Success Cases"],"fullName":"Integrations Refresh API Integration Tests Success Cases should update access token in database","status":"failed","title":"should update access token in database","duration":2116.618291,"failureMessages":["AssertionError: expected null to be truthy\n    at /Users/765h/Huntaze/tests/integration/api/integrations-refresh.integration.test.ts:308:23\n    at file:///Users/765h/Huntaze/node_modules/@vitest/runner/dist/index.js:753:20"],"location":{"line":290,"column":5},"meta":{}},{"ancestorTitles":["Integrations Refresh API Integration Tests","Success Cases"],"fullName":"Integrations Refresh API Integration Tests Success Cases should update expiration time","status":"failed","title":"should update expiration time","duration":1543.9815420000004,"failureMessages":["AssertionError: expected null to be truthy\n    at /Users/765h/Huntaze/tests/integration/api/integrations-refresh.integration.test.ts:329:23\n    at file:///Users/765h/Huntaze/node_modules/@vitest/runner/dist/index.js:753:20"],"location":{"line":312,"column":5},"meta":{}},{"ancestorTitles":["Integrations Refresh API Integration Tests","Success Cases"],"fullName":"Integrations Refresh API Integration Tests Success Cases should return provider and accountId in response","status":"failed","title":"should return provider and accountId in response","duration":849.8876250000003,"failureMessages":["PrismaClientKnownRequestError: \nInvalid `prisma.oAuthAccount.create()` invocation in\n/Users/765h/Huntaze/tests/integration/api/integrations-refresh.integration.test.ts:172:36\n\n  169 // Generate unique account ID if not provided\n  170 const accountId = providerAccountId || `${MOCK_INTEGRATION.providerAccountId}-${Date.now()}-${Math.random().toString(36).substring(7)}`;\n  171 \n→ 172 return await prisma.oAuthAccount.create(\nForeign key constraint violated on the constraint: `oauth_accounts_user_id_fkey`\n    at ei.handleRequestError (/Users/765h/Huntaze/node_modules/@prisma/client/runtime/library.js:121:7268)\n    at ei.handleAndLogRequestError (/Users/765h/Huntaze/node_modules/@prisma/client/runtime/library.js:121:6593)\n    at ei.request (/Users/765h/Huntaze/node_modules/@prisma/client/runtime/library.js:121:6300)\n    at a (/Users/765h/Huntaze/node_modules/@prisma/client/runtime/library.js:130:9551)\n    at createTestIntegration (/Users/765h/Huntaze/tests/integration/api/integrations-refresh.integration.test.ts:172:10)\n    at /Users/765h/Huntaze/tests/integration/api/integrations-refresh.integration.test.ts:251:23"],"location":{"line":334,"column":5},"meta":{}},{"ancestorTitles":["Integrations Refresh API Integration Tests","Success Cases"],"fullName":"Integrations Refresh API Integration Tests Success Cases should invalidate integration cache","status":"passed","title":"should invalidate integration cache","duration":1269.419833,"failureMessages":[],"location":{"line":348,"column":5},"meta":{}},{"ancestorTitles":["Integrations Refresh API Integration Tests","Success Cases"],"fullName":"Integrations Refresh API Integration Tests Success Cases should include success message","status":"failed","title":"should include success message","duration":1002.4212090000001,"failureMessages":["TypeError: Cannot read properties of undefined (reading 'message')\n    at /Users/765h/Huntaze/tests/integration/api/integrations-refresh.integration.test.ts:378:24\n    at file:///Users/765h/Huntaze/node_modules/@vitest/runner/dist/index.js:753:20"],"location":{"line":368,"column":5},"meta":{}},{"ancestorTitles":["Integrations Refresh API Integration Tests","Authentication Failures"],"fullName":"Integrations Refresh API Integration Tests Authentication Failures should return 401 without session","status":"failed","title":"should return 401 without session","duration":845.1097919999993,"failureMessages":["PrismaClientKnownRequestError: \nInvalid `prisma.oAuthAccount.create()` invocation in\n/Users/765h/Huntaze/tests/integration/api/integrations-refresh.integration.test.ts:172:36\n\n  169 // Generate unique account ID if not provided\n  170 const accountId = providerAccountId || `${MOCK_INTEGRATION.providerAccountId}-${Date.now()}-${Math.random().toString(36).substring(7)}`;\n  171 \n→ 172 return await prisma.oAuthAccount.create(\nForeign key constraint violated on the constraint: `oauth_accounts_user_id_fkey`\n    at ei.handleRequestError (/Users/765h/Huntaze/node_modules/@prisma/client/runtime/library.js:121:7268)\n    at ei.handleAndLogRequestError (/Users/765h/Huntaze/node_modules/@prisma/client/runtime/library.js:121:6593)\n    at ei.request (/Users/765h/Huntaze/node_modules/@prisma/client/runtime/library.js:121:6300)\n    at a (/Users/765h/Huntaze/node_modules/@prisma/client/runtime/library.js:130:9551)\n    at createTestIntegration (/Users/765h/Huntaze/tests/integration/api/integrations-refresh.integration.test.ts:172:10)\n    at /Users/765h/Huntaze/tests/integration/api/integrations-refresh.integration.test.ts:251:23"],"location":{"line":389,"column":5},"meta":{}},{"ancestorTitles":["Integrations Refresh API Integration Tests","Authentication Failures"],"fullName":"Integrations Refresh API Integration Tests Authentication Failures should return 401 with invalid session","status":"passed","title":"should return 401 with invalid session","duration":898.0889160000006,"failureMessages":[],"location":{"line":403,"column":5},"meta":{}},{"ancestorTitles":["Integrations Refresh API Integration Tests","CSRF Protection"],"fullName":"Integrations Refresh API Integration Tests CSRF Protection should return 403 without CSRF token in production","status":"failed","title":"should return 403 without CSRF token in production","duration":1009.5135840000003,"failureMessages":["AssertionError: expected 404 to be 200 // Object.is equality\n    at /Users/765h/Huntaze/tests/integration/api/integrations-refresh.integration.test.ts:430:31\n    at file:///Users/765h/Huntaze/node_modules/@vitest/runner/dist/index.js:753:20"],"location":{"line":420,"column":5},"meta":{}},{"ancestorTitles":["Integrations Refresh API Integration Tests","CSRF Protection"],"fullName":"Integrations Refresh API Integration Tests CSRF Protection should return 403 with invalid CSRF token in production","status":"failed","title":"should return 403 with invalid CSRF token in production","duration":866.4082920000001,"failureMessages":["PrismaClientKnownRequestError: \nInvalid `prisma.oAuthAccount.create()` invocation in\n/Users/765h/Huntaze/tests/integration/api/integrations-refresh.integration.test.ts:172:36\n\n  169 // Generate unique account ID if not provided\n  170 const accountId = providerAccountId || `${MOCK_INTEGRATION.providerAccountId}-${Date.now()}-${Math.random().toString(36).substring(7)}`;\n  171 \n→ 172 return await prisma.oAuthAccount.create(\nForeign key constraint violated on the constraint: `oauth_accounts_user_id_fkey`\n    at ei.handleRequestError (/Users/765h/Huntaze/node_modules/@prisma/client/runtime/library.js:121:7268)\n    at ei.handleAndLogRequestError (/Users/765h/Huntaze/node_modules/@prisma/client/runtime/library.js:121:6593)\n    at ei.request (/Users/765h/Huntaze/node_modules/@prisma/client/runtime/library.js:121:6300)\n    at a (/Users/765h/Huntaze/node_modules/@prisma/client/runtime/library.js:130:9551)\n    at createTestIntegration (/Users/765h/Huntaze/tests/integration/api/integrations-refresh.integration.test.ts:172:10)\n    at /Users/765h/Huntaze/tests/integration/api/integrations-refresh.integration.test.ts:251:23"],"location":{"line":433,"column":5},"meta":{}},{"ancestorTitles":["Integrations Refresh API Integration Tests","Validation Errors"],"fullName":"Integrations Refresh API Integration Tests Validation Errors should return 400 with invalid provider","status":"failed","title":"should return 400 with invalid provider","duration":850.1995000000006,"failureMessages":["PrismaClientKnownRequestError: \nInvalid `prisma.oAuthAccount.create()` invocation in\n/Users/765h/Huntaze/tests/integration/api/integrations-refresh.integration.test.ts:172:36\n\n  169 // Generate unique account ID if not provided\n  170 const accountId = providerAccountId || `${MOCK_INTEGRATION.providerAccountId}-${Date.now()}-${Math.random().toString(36).substring(7)}`;\n  171 \n→ 172 return await prisma.oAuthAccount.create(\nForeign key constraint violated on the constraint: `oauth_accounts_user_id_fkey`\n    at ei.handleRequestError (/Users/765h/Huntaze/node_modules/@prisma/client/runtime/library.js:121:7268)\n    at ei.handleAndLogRequestError (/Users/765h/Huntaze/node_modules/@prisma/client/runtime/library.js:121:6593)\n    at ei.request (/Users/765h/Huntaze/node_modules/@prisma/client/runtime/library.js:121:6300)\n    at a (/Users/765h/Huntaze/node_modules/@prisma/client/runtime/library.js:130:9551)\n    at createTestIntegration (/Users/765h/Huntaze/tests/integration/api/integrations-refresh.integration.test.ts:172:10)\n    at /Users/765h/Huntaze/tests/integration/api/integrations-refresh.integration.test.ts:251:23"],"location":{"line":452,"column":5},"meta":{}},{"ancestorTitles":["Integrations Refresh API Integration Tests","Validation Errors"],"fullName":"Integrations Refresh API Integration Tests Validation Errors should return 400 with empty accountId","status":"failed","title":"should return 400 with empty accountId","duration":861.3893749999988,"failureMessages":["PrismaClientKnownRequestError: \nInvalid `prisma.oAuthAccount.create()` invocation in\n/Users/765h/Huntaze/tests/integration/api/integrations-refresh.integration.test.ts:172:36\n\n  169 // Generate unique account ID if not provided\n  170 const accountId = providerAccountId || `${MOCK_INTEGRATION.providerAccountId}-${Date.now()}-${Math.random().toString(36).substring(7)}`;\n  171 \n→ 172 return await prisma.oAuthAccount.create(\nForeign key constraint violated on the constraint: `oauth_accounts_user_id_fkey`\n    at ei.handleRequestError (/Users/765h/Huntaze/node_modules/@prisma/client/runtime/library.js:121:7268)\n    at ei.handleAndLogRequestError (/Users/765h/Huntaze/node_modules/@prisma/client/runtime/library.js:121:6593)\n    at ei.request (/Users/765h/Huntaze/node_modules/@prisma/client/runtime/library.js:121:6300)\n    at a (/Users/765h/Huntaze/node_modules/@prisma/client/runtime/library.js:130:9551)\n    at createTestIntegration (/Users/765h/Huntaze/tests/integration/api/integrations-refresh.integration.test.ts:172:10)\n    at /Users/765h/Huntaze/tests/integration/api/integrations-refresh.integration.test.ts:251:23"],"location":{"line":467,"column":5},"meta":{}},{"ancestorTitles":["Integrations Refresh API Integration Tests","Validation Errors"],"fullName":"Integrations Refresh API Integration Tests Validation Errors should validate provider against allowed list","status":"passed","title":"should validate provider against allowed list","duration":1178.554166,"failureMessages":[],"location":{"line":482,"column":5},"meta":{}},{"ancestorTitles":["Integrations Refresh API Integration Tests","Not Found Cases"],"fullName":"Integrations Refresh API Integration Tests Not Found Cases should return 404 for non-existent integration","status":"passed","title":"should return 404 for non-existent integration","duration":999.4622079999972,"failureMessages":[],"location":{"line":503,"column":5},"meta":{}},{"ancestorTitles":["Integrations Refresh API Integration Tests","Not Found Cases"],"fullName":"Integrations Refresh API Integration Tests Not Found Cases should return 404 for other user's integration","status":"passed","title":"should return 404 for other user's integration","duration":2012.3663330000018,"failureMessages":[],"location":{"line":518,"column":5},"meta":{}},{"ancestorTitles":["Integrations Refresh API Integration Tests","User Isolation"],"fullName":"Integrations Refresh API Integration Tests User Isolation should only refresh user's own integrations","status":"passed","title":"should only refresh user's own integrations","duration":1747.2563329999975,"failureMessages":[],"location":{"line":551,"column":5},"meta":{}},{"ancestorTitles":["Integrations Refresh API Integration Tests","Performance"],"fullName":"Integrations Refresh API Integration Tests Performance should respond within 2 seconds","status":"passed","title":"should respond within 2 seconds","duration":997.1231670000016,"failureMessages":[],"location":{"line":593,"column":5},"meta":{}},{"ancestorTitles":["Integrations Refresh API Integration Tests","Error Handling"],"fullName":"Integrations Refresh API Integration Tests Error Handling should include correlation ID in responses","status":"passed","title":"should include correlation ID in responses","duration":1398.2469579999997,"failureMessages":[],"location":{"line":614,"column":5},"meta":{}},{"ancestorTitles":["Integrations Refresh API Integration Tests","Error Handling"],"fullName":"Integrations Refresh API Integration Tests Error Handling should return user-friendly error messages","status":"passed","title":"should return user-friendly error messages","duration":901.2232500000027,"failureMessages":[],"location":{"line":627,"column":5},"meta":{}},{"ancestorTitles":["Integrations Refresh API Integration Tests","Audit Logging"],"fullName":"Integrations Refresh API Integration Tests Audit Logging should log refresh action with IP and user agent","status":"passed","title":"should log refresh action with IP and user agent","duration":1268.5745830000014,"failureMessages":[],"location":{"line":650,"column":5},"meta":{}},{"ancestorTitles":["Integrations Refresh API Integration Tests","Concurrent Access"],"fullName":"Integrations Refresh API Integration Tests Concurrent Access should handle concurrent refresh requests safely","status":"failed","title":"should handle concurrent refresh requests safely","duration":842.206000000002,"failureMessages":["PrismaClientKnownRequestError: \nInvalid `prisma.oAuthAccount.create()` invocation in\n/Users/765h/Huntaze/tests/integration/api/integrations-refresh.integration.test.ts:172:36\n\n  169 // Generate unique account ID if not provided\n  170 const accountId = providerAccountId || `${MOCK_INTEGRATION.providerAccountId}-${Date.now()}-${Math.random().toString(36).substring(7)}`;\n  171 \n→ 172 return await prisma.oAuthAccount.create(\nForeign key constraint violated on the constraint: `oauth_accounts_user_id_fkey`\n    at ei.handleRequestError (/Users/765h/Huntaze/node_modules/@prisma/client/runtime/library.js:121:7268)\n    at ei.handleAndLogRequestError (/Users/765h/Huntaze/node_modules/@prisma/client/runtime/library.js:121:6593)\n    at ei.request (/Users/765h/Huntaze/node_modules/@prisma/client/runtime/library.js:121:6300)\n    at a (/Users/765h/Huntaze/node_modules/@prisma/client/runtime/library.js:130:9551)\n    at createTestIntegration (/Users/765h/Huntaze/tests/integration/api/integrations-refresh.integration.test.ts:172:10)\n    at /Users/765h/Huntaze/tests/integration/api/integrations-refresh.integration.test.ts:251:23"],"location":{"line":670,"column":5},"meta":{}}],"startTime":1763743281468,"endTime":1763743307947.206,"status":"failed","message":"","name":"/Users/765h/Huntaze/tests/integration/api/integrations-refresh.integration.test.ts"},{"assertionResults":[{"ancestorTitles":["Integrations Status API Integration Tests","Authentication"],"fullName":"Integrations Status API Integration Tests Authentication should return 401 without session","status":"passed","title":"should return 401 without session","duration":2138.421042,"failureMessages":[],"location":{"line":607,"column":5},"meta":{}},{"ancestorTitles":["Integrations Status API Integration Tests","Authentication"],"fullName":"Integrations Status API Integration Tests Authentication should return 401 with invalid session","status":"passed","title":"should return 401 with invalid session","duration":817.186917,"failureMessages":[],"location":{"line":629,"column":5},"meta":{}},{"ancestorTitles":["Integrations Status API Integration Tests","Authentication"],"fullName":"Integrations Status API Integration Tests Authentication should return 200 with valid session","status":"passed","title":"should return 200 with valid session","duration":1666.9500419999995,"failureMessages":[],"location":{"line":639,"column":5},"meta":{}},{"ancestorTitles":["Integrations Status API Integration Tests","Authentication"],"fullName":"Integrations Status API Integration Tests Authentication should include correlation ID in unauthorized responses","status":"passed","title":"should include correlation ID in unauthorized responses","duration":807.3844170000002,"failureMessages":[],"location":{"line":647,"column":5},"meta":{}},{"ancestorTitles":["Integrations Status API Integration Tests","Success Cases"],"fullName":"Integrations Status API Integration Tests Success Cases should return 200 with empty integrations array","status":"passed","title":"should return 200 with empty integrations array","duration":902.500916,"failureMessages":[],"location":{"line":660,"column":5},"meta":{}},{"ancestorTitles":["Integrations Status API Integration Tests","Success Cases"],"fullName":"Integrations Status API Integration Tests Success Cases should return all user integrations","status":"failed","title":"should return all user integrations","duration":1190.4817909999992,"failureMessages":["AssertionError: expected [] to have a length of 2 but got +0\n    at Proxy.<anonymous> (file:///Users/765h/Huntaze/node_modules/@vitest/expect/dist/index.js:1322:20)\n    at Proxy.<anonymous> (file:///Users/765h/Huntaze/node_modules/@vitest/expect/dist/index.js:1090:14)\n    at Proxy.methodWrapper (file:///Users/765h/Huntaze/node_modules/chai/index.js:1700:25)\n    at /Users/765h/Huntaze/tests/integration/api/integrations-status.integration.test.ts:702:38\n    at file:///Users/765h/Huntaze/node_modules/@vitest/runner/dist/index.js:753:20"],"location":{"line":691,"column":5},"meta":{}},{"ancestorTitles":["Integrations Status API Integration Tests","Success Cases"],"fullName":"Integrations Status API Integration Tests Success Cases should include all required fields","status":"passed","title":"should include all required fields","duration":1000.2388749999991,"failureMessages":[],"location":{"line":710,"column":5},"meta":{}},{"ancestorTitles":["Integrations Status API Integration Tests","Success Cases"],"fullName":"Integrations Status API Integration Tests Success Cases should mark expired integrations correctly","status":"passed","title":"should mark expired integrations correctly","duration":997.622166000001,"failureMessages":[],"location":{"line":730,"column":5},"meta":{}},{"ancestorTitles":["Integrations Status API Integration Tests","Success Cases"],"fullName":"Integrations Status API Integration Tests Success Cases should mark active integrations correctly","status":"failed","title":"should mark active integrations correctly","duration":1073.5705830000006,"failureMessages":["TypeError: Cannot read properties of undefined (reading 'status')\n    at /Users/765h/Huntaze/tests/integration/api/integrations-status.integration.test.ts:753:26\n    at file:///Users/765h/Huntaze/node_modules/@vitest/runner/dist/index.js:753:20"],"location":{"line":743,"column":5},"meta":{}},{"ancestorTitles":["Integrations Status API Integration Tests","Success Cases"],"fullName":"Integrations Status API Integration Tests Success Cases should include account name from metadata","status":"passed","title":"should include account name from metadata","duration":994.8810830000002,"failureMessages":[],"location":{"line":756,"column":5},"meta":{}},{"ancestorTitles":["Integrations Status API Integration Tests","Success Cases"],"fullName":"Integrations Status API Integration Tests Success Cases should include duration in meta","status":"passed","title":"should include duration in meta","duration":920.920250000001,"failureMessages":[],"location":{"line":769,"column":5},"meta":{}},{"ancestorTitles":["Integrations Status API Integration Tests","Success Cases"],"fullName":"Integrations Status API Integration Tests Success Cases should include requestId in meta","status":"passed","title":"should include requestId in meta","duration":920.6391660000008,"failureMessages":[],"location":{"line":782,"column":5},"meta":{}},{"ancestorTitles":["Integrations Status API Integration Tests","Success Cases"],"fullName":"Integrations Status API Integration Tests Success Cases should include timestamp in meta","status":"passed","title":"should include timestamp in meta","duration":915.6549579999992,"failureMessages":[],"location":{"line":795,"column":5},"meta":{}},{"ancestorTitles":["Integrations Status API Integration Tests","Cache Behavior"],"fullName":"Integrations Status API Integration Tests Cache Behavior should cache integrations for subsequent requests","status":"failed","title":"should cache integrations for subsequent requests","duration":858.9880830000002,"failureMessages":["PrismaClientKnownRequestError: \nInvalid `prisma.oAuthAccount.create()` invocation in\n/Users/765h/Huntaze/tests/integration/api/integrations-status.integration.test.ts:400:47\n\n  397 // Generate unique providerAccountId to avoid conflicts\n  398 const uniqueAccountId = `${integration.providerAccountId}-${Date.now()}-${Math.random().toString(36).substring(7)}`;\n  399 \n→ 400 const created = await prisma.oAuthAccount.create(\nForeign key constraint violated on the constraint: `oauth_accounts_user_id_fkey`\n    at ei.handleRequestError (/Users/765h/Huntaze/node_modules/@prisma/client/runtime/library.js:121:7268)\n    at ei.handleAndLogRequestError (/Users/765h/Huntaze/node_modules/@prisma/client/runtime/library.js:121:6593)\n    at ei.request (/Users/765h/Huntaze/node_modules/@prisma/client/runtime/library.js:121:6300)\n    at a (/Users/765h/Huntaze/node_modules/@prisma/client/runtime/library.js:130:9551)\n    at createIntegration (/Users/765h/Huntaze/tests/integration/api/integrations-status.integration.test.ts:400:21)\n    at /Users/765h/Huntaze/tests/integration/api/integrations-status.integration.test.ts:817:7\n    at file:///Users/765h/Huntaze/node_modules/@vitest/runner/dist/index.js:753:20"],"location":{"line":816,"column":5},"meta":{}},{"ancestorTitles":["Integrations Status API Integration Tests","Cache Behavior"],"fullName":"Integrations Status API Integration Tests Cache Behavior should expire cache after 5 minutes","status":"failed","title":"should expire cache after 5 minutes","duration":1235.4243330000008,"failureMessages":["PrismaClientKnownRequestError: \nInvalid `prisma.oAuthAccount.create()` invocation in\n/Users/765h/Huntaze/tests/integration/api/integrations-status.integration.test.ts:400:47\n\n  397 // Generate unique providerAccountId to avoid conflicts\n  398 const uniqueAccountId = `${integration.providerAccountId}-${Date.now()}-${Math.random().toString(36).substring(7)}`;\n  399 \n→ 400 const created = await prisma.oAuthAccount.create(\nForeign key constraint violated on the constraint: `oauth_accounts_user_id_fkey`\n    at ei.handleRequestError (/Users/765h/Huntaze/node_modules/@prisma/client/runtime/library.js:121:7268)\n    at ei.handleAndLogRequestError (/Users/765h/Huntaze/node_modules/@prisma/client/runtime/library.js:121:6593)\n    at ei.request (/Users/765h/Huntaze/node_modules/@prisma/client/runtime/library.js:121:6300)\n    at a (/Users/765h/Huntaze/node_modules/@prisma/client/runtime/library.js:130:9551)\n    at createIntegration (/Users/765h/Huntaze/tests/integration/api/integrations-status.integration.test.ts:400:21)\n    at /Users/765h/Huntaze/tests/integration/api/integrations-status.integration.test.ts:855:7\n    at file:///Users/765h/Huntaze/node_modules/@vitest/runner/dist/index.js:753:20"],"location":{"line":844,"column":5},"meta":{}},{"ancestorTitles":["Integrations Status API Integration Tests","Cache Behavior"],"fullName":"Integrations Status API Integration Tests Cache Behavior should include Cache-Control header","status":"passed","title":"should include Cache-Control header","duration":916.0661249999976,"failureMessages":[],"location":{"line":872,"column":5},"meta":{}},{"ancestorTitles":["Integrations Status API Integration Tests","Cache Behavior"],"fullName":"Integrations Status API Integration Tests Cache Behavior should serve cached data faster","status":"passed","title":"should serve cached data faster","duration":1043.0021250000027,"failureMessages":[],"location":{"line":882,"column":5},"meta":{}},{"ancestorTitles":["Integrations Status API Integration Tests","Performance"],"fullName":"Integrations Status API Integration Tests Performance should respond within 500ms (p95 target)","status":"failed","title":"should respond within 500ms (p95 target)","duration":873.8157499999979,"failureMessages":["PrismaClientKnownRequestError: \nInvalid `prisma.oAuthAccount.create()` invocation in\n/Users/765h/Huntaze/tests/integration/api/integrations-status.integration.test.ts:400:47\n\n  397 // Generate unique providerAccountId to avoid conflicts\n  398 const uniqueAccountId = `${integration.providerAccountId}-${Date.now()}-${Math.random().toString(36).substring(7)}`;\n  399 \n→ 400 const created = await prisma.oAuthAccount.create(\nForeign key constraint violated on the constraint: `oauth_accounts_user_id_fkey`\n    at ei.handleRequestError (/Users/765h/Huntaze/node_modules/@prisma/client/runtime/library.js:121:7268)\n    at ei.handleAndLogRequestError (/Users/765h/Huntaze/node_modules/@prisma/client/runtime/library.js:121:6593)\n    at ei.request (/Users/765h/Huntaze/node_modules/@prisma/client/runtime/library.js:121:6300)\n    at a (/Users/765h/Huntaze/node_modules/@prisma/client/runtime/library.js:130:9551)\n    at createIntegration (/Users/765h/Huntaze/tests/integration/api/integrations-status.integration.test.ts:400:21)\n    at /Users/765h/Huntaze/tests/integration/api/integrations-status.integration.test.ts:916:7\n    at file:///Users/765h/Huntaze/node_modules/@vitest/runner/dist/index.js:753:20"],"location":{"line":915,"column":5},"meta":{}},{"ancestorTitles":["Integrations Status API Integration Tests","Performance"],"fullName":"Integrations Status API Integration Tests Performance should handle 10 concurrent requests efficiently","status":"passed","title":"should handle 10 concurrent requests efficiently","duration":1824.2512090000018,"failureMessages":[],"location":{"line":927,"column":5},"meta":{}},{"ancestorTitles":["Integrations Status API Integration Tests","Performance"],"fullName":"Integrations Status API Integration Tests Performance should maintain performance under load","status":"passed","title":"should maintain performance under load","duration":3565.4918749999997,"failureMessages":[],"location":{"line":943,"column":5},"meta":{}},{"ancestorTitles":["Integrations Status API Integration Tests","Concurrent Access"],"fullName":"Integrations Status API Integration Tests Concurrent Access should handle concurrent requests without race conditions","status":"passed","title":"should handle concurrent requests without race conditions","duration":1760.3890409999985,"failureMessages":[],"location":{"line":974,"column":5},"meta":{}},{"ancestorTitles":["Integrations Status API Integration Tests","Concurrent Access"],"fullName":"Integrations Status API Integration Tests Concurrent Access should maintain data consistency","status":"passed","title":"should maintain data consistency","duration":1008.7537919999995,"failureMessages":[],"location":{"line":995,"column":5},"meta":{}},{"ancestorTitles":["Integrations Status API Integration Tests","Data Integrity"],"fullName":"Integrations Status API Integration Tests Data Integrity should have valid provider values","status":"passed","title":"should have valid provider values","duration":994.0429999999978,"failureMessages":[],"location":{"line":1016,"column":5},"meta":{}},{"ancestorTitles":["Integrations Status API Integration Tests","Data Integrity"],"fullName":"Integrations Status API Integration Tests Data Integrity should have valid status values","status":"passed","title":"should have valid status values","duration":994.9883750000008,"failureMessages":[],"location":{"line":1029,"column":5},"meta":{}},{"ancestorTitles":["Integrations Status API Integration Tests","Data Integrity"],"fullName":"Integrations Status API Integration Tests Data Integrity should have valid ISO 8601 timestamps","status":"passed","title":"should have valid ISO 8601 timestamps","duration":1003.6018750000003,"failureMessages":[],"location":{"line":1042,"column":5},"meta":{}},{"ancestorTitles":["Integrations Status API Integration Tests","Data Integrity"],"fullName":"Integrations Status API Integration Tests Data Integrity should have positive integer IDs","status":"passed","title":"should have positive integer IDs","duration":1106.0407919999998,"failureMessages":[],"location":{"line":1065,"column":5},"meta":{}},{"ancestorTitles":["Integrations Status API Integration Tests","User Isolation"],"fullName":"Integrations Status API Integration Tests User Isolation should only return integrations for authenticated user","status":"passed","title":"should only return integrations for authenticated user","duration":2081.2820420000025,"failureMessages":[],"location":{"line":1085,"column":5},"meta":{}},{"ancestorTitles":["Integrations Status API Integration Tests","Response Schema Validation"],"fullName":"Integrations Status API Integration Tests Response Schema Validation should match Zod schema for success response","status":"passed","title":"should match Zod schema for success response","duration":991.3133749999979,"failureMessages":[],"location":{"line":1127,"column":5},"meta":{}},{"ancestorTitles":["Integrations Status API Integration Tests","Response Schema Validation"],"fullName":"Integrations Status API Integration Tests Response Schema Validation should validate all integration fields","status":"passed","title":"should validate all integration fields","duration":1170.6104170000035,"failureMessages":[],"location":{"line":1145,"column":5},"meta":{}}],"startTime":1763743281432,"endTime":1763743317206.6104,"status":"failed","message":"","name":"/Users/765h/Huntaze/tests/integration/api/integrations-status.integration.test.ts"},{"assertionResults":[{"ancestorTitles":["Monitoring Metrics API Integration Tests","GET /api/monitoring/metrics - Success Cases"],"fullName":"Monitoring Metrics API Integration Tests GET /api/monitoring/metrics - Success Cases should return 200 with valid metrics summary","status":"passed","title":"should return 200 with valid metrics summary","duration":37.64829199999804,"failureMessages":[],"location":{"line":170,"column":5},"meta":{}},{"ancestorTitles":["Monitoring Metrics API Integration Tests","GET /api/monitoring/metrics - Success Cases"],"fullName":"Monitoring Metrics API Integration Tests GET /api/monitoring/metrics - Success Cases should return valid metrics structure","status":"passed","title":"should return valid metrics structure","duration":1.6945410000007541,"failureMessages":[],"location":{"line":189,"column":5},"meta":{}},{"ancestorTitles":["Monitoring Metrics API Integration Tests","GET /api/monitoring/metrics - Success Cases"],"fullName":"Monitoring Metrics API Integration Tests GET /api/monitoring/metrics - Success Cases should return alarms array (empty or populated)","status":"passed","title":"should return alarms array (empty or populated)","duration":0.790499999999156,"failureMessages":[],"location":{"line":219,"column":5},"meta":{}},{"ancestorTitles":["Monitoring Metrics API Integration Tests","GET /api/monitoring/metrics - Success Cases"],"fullName":"Monitoring Metrics API Integration Tests GET /api/monitoring/metrics - Success Cases should include valid ISO 8601 timestamp","status":"passed","title":"should include valid ISO 8601 timestamp","duration":1.2070000000021537,"failureMessages":[],"location":{"line":239,"column":5},"meta":{}},{"ancestorTitles":["Monitoring Metrics API Integration Tests","GET /api/monitoring/metrics - Success Cases"],"fullName":"Monitoring Metrics API Integration Tests GET /api/monitoring/metrics - Success Cases should include correlation ID in response headers","status":"passed","title":"should include correlation ID in response headers","duration":1.286791999998968,"failureMessages":[],"location":{"line":256,"column":5},"meta":{}},{"ancestorTitles":["Monitoring Metrics API Integration Tests","GET /api/monitoring/metrics - Success Cases"],"fullName":"Monitoring Metrics API Integration Tests GET /api/monitoring/metrics - Success Cases should include duration in response","status":"passed","title":"should include duration in response","duration":0.508125000000291,"failureMessages":[],"location":{"line":269,"column":5},"meta":{}},{"ancestorTitles":["Monitoring Metrics API Integration Tests","Cache Behavior"],"fullName":"Monitoring Metrics API Integration Tests Cache Behavior should cache metrics for subsequent requests","status":"passed","title":"should cache metrics for subsequent requests","duration":0.9107499999990978,"failureMessages":[],"location":{"line":289,"column":5},"meta":{}},{"ancestorTitles":["Monitoring Metrics API Integration Tests","Cache Behavior"],"fullName":"Monitoring Metrics API Integration Tests Cache Behavior should expire cache after TTL (30 seconds)","status":"passed","title":"should expire cache after TTL (30 seconds)","duration":31013.560041999997,"failureMessages":[],"location":{"line":314,"column":5},"meta":{}},{"ancestorTitles":["Monitoring Metrics API Integration Tests","Cache Behavior"],"fullName":"Monitoring Metrics API Integration Tests Cache Behavior should include Cache-Control header","status":"passed","title":"should include Cache-Control header","duration":1.8258749999949941,"failureMessages":[],"location":{"line":330,"column":5},"meta":{}},{"ancestorTitles":["Monitoring Metrics API Integration Tests","Cache Behavior"],"fullName":"Monitoring Metrics API Integration Tests Cache Behavior should serve cached data faster than fresh data","status":"passed","title":"should serve cached data faster than fresh data","duration":2.333874999996624,"failureMessages":[],"location":{"line":339,"column":5},"meta":{}},{"ancestorTitles":["Monitoring Metrics API Integration Tests","Performance Requirements"],"fullName":"Monitoring Metrics API Integration Tests Performance Requirements should return metrics within 500ms (p95 target)","status":"passed","title":"should return metrics within 500ms (p95 target)","duration":1.3186669999995502,"failureMessages":[],"location":{"line":369,"column":5},"meta":{}},{"ancestorTitles":["Monitoring Metrics API Integration Tests","Performance Requirements"],"fullName":"Monitoring Metrics API Integration Tests Performance Requirements should handle 10 concurrent requests efficiently","status":"passed","title":"should handle 10 concurrent requests efficiently","duration":4.014792000001762,"failureMessages":[],"location":{"line":377,"column":5},"meta":{}},{"ancestorTitles":["Monitoring Metrics API Integration Tests","Performance Requirements"],"fullName":"Monitoring Metrics API Integration Tests Performance Requirements should maintain performance under load (50 requests)","status":"passed","title":"should maintain performance under load (50 requests)","duration":22.01279099999374,"failureMessages":[],"location":{"line":391,"column":5},"meta":{}},{"ancestorTitles":["Monitoring Metrics API Integration Tests","Concurrent Access"],"fullName":"Monitoring Metrics API Integration Tests Concurrent Access should handle concurrent requests without race conditions","status":"passed","title":"should handle concurrent requests without race conditions","duration":5.6663750000006985,"failureMessages":[],"location":{"line":416,"column":5},"meta":{}},{"ancestorTitles":["Monitoring Metrics API Integration Tests","Concurrent Access"],"fullName":"Monitoring Metrics API Integration Tests Concurrent Access should use cache for concurrent requests","status":"passed","title":"should use cache for concurrent requests","duration":1.7858330000017304,"failureMessages":[],"location":{"line":441,"column":5},"meta":{}},{"ancestorTitles":["Monitoring Metrics API Integration Tests","Concurrent Access"],"fullName":"Monitoring Metrics API Integration Tests Concurrent Access should maintain data consistency across concurrent requests","status":"passed","title":"should maintain data consistency across concurrent requests","duration":2.656124999994063,"failureMessages":[],"location":{"line":460,"column":5},"meta":{}},{"ancestorTitles":["Monitoring Metrics API Integration Tests","Error Handling"],"fullName":"Monitoring Metrics API Integration Tests Error Handling should handle CloudWatch service errors gracefully","status":"passed","title":"should handle CloudWatch service errors gracefully","duration":0.9278339999946184,"failureMessages":[],"location":{"line":479,"column":5},"meta":{}},{"ancestorTitles":["Monitoring Metrics API Integration Tests","Error Handling"],"fullName":"Monitoring Metrics API Integration Tests Error Handling should include retryable flag in error responses","status":"passed","title":"should include retryable flag in error responses","duration":0.08487500000046566,"failureMessages":[],"location":{"line":493,"column":5},"meta":{}},{"ancestorTitles":["Monitoring Metrics API Integration Tests","OPTIONS /api/monitoring/metrics"],"fullName":"Monitoring Metrics API Integration Tests OPTIONS /api/monitoring/metrics should handle CORS preflight requests","status":"passed","title":"should handle CORS preflight requests","duration":0.37666700000409037,"failureMessages":[],"location":{"line":510,"column":5},"meta":{}},{"ancestorTitles":["Monitoring Metrics API Integration Tests","OPTIONS /api/monitoring/metrics"],"fullName":"Monitoring Metrics API Integration Tests OPTIONS /api/monitoring/metrics should include cache headers for OPTIONS","status":"passed","title":"should include cache headers for OPTIONS","duration":0.26683399999456014,"failureMessages":[],"location":{"line":520,"column":5},"meta":{}},{"ancestorTitles":["Monitoring Metrics API Integration Tests","Authentication"],"fullName":"Monitoring Metrics API Integration Tests Authentication should allow unauthenticated requests (public endpoint)","status":"passed","title":"should allow unauthenticated requests (public endpoint)","duration":0.3977909999957774,"failureMessages":[],"location":{"line":537,"column":5},"meta":{}},{"ancestorTitles":["Monitoring Metrics API Integration Tests","Authentication"],"fullName":"Monitoring Metrics API Integration Tests Authentication should work with or without session","status":"passed","title":"should work with or without session","duration":0.6668329999956768,"failureMessages":[],"location":{"line":549,"column":5},"meta":{}},{"ancestorTitles":["Monitoring Metrics API Integration Tests","Response Schema Validation"],"fullName":"Monitoring Metrics API Integration Tests Response Schema Validation should match Zod schema for success response","status":"passed","title":"should match Zod schema for success response","duration":0.526917000002868,"failureMessages":[],"location":{"line":569,"column":5},"meta":{}},{"ancestorTitles":["Monitoring Metrics API Integration Tests","Response Schema Validation"],"fullName":"Monitoring Metrics API Integration Tests Response Schema Validation should have all required fields in metrics","status":"passed","title":"should have all required fields in metrics","duration":0.5921250000028522,"failureMessages":[],"location":{"line":582,"column":5},"meta":{}},{"ancestorTitles":["Monitoring Metrics API Integration Tests","Response Schema Validation"],"fullName":"Monitoring Metrics API Integration Tests Response Schema Validation should have valid data types for all metrics","status":"passed","title":"should have valid data types for all metrics","duration":0.8110000000015134,"failureMessages":[],"location":{"line":606,"column":5},"meta":{}},{"ancestorTitles":["Monitoring Metrics API Integration Tests","Edge Cases"],"fullName":"Monitoring Metrics API Integration Tests Edge Cases should handle empty alarms array","status":"passed","title":"should handle empty alarms array","duration":0.4260409999988042,"failureMessages":[],"location":{"line":641,"column":5},"meta":{}},{"ancestorTitles":["Monitoring Metrics API Integration Tests","Edge Cases"],"fullName":"Monitoring Metrics API Integration Tests Edge Cases should handle zero metrics gracefully","status":"passed","title":"should handle zero metrics gracefully","duration":0.4121660000018892,"failureMessages":[],"location":{"line":650,"column":5},"meta":{}},{"ancestorTitles":["Monitoring Metrics API Integration Tests","Edge Cases"],"fullName":"Monitoring Metrics API Integration Tests Edge Cases should handle rapid successive requests","status":"passed","title":"should handle rapid successive requests","duration":1.376125000002503,"failureMessages":[],"location":{"line":664,"column":5},"meta":{}}],"startTime":1763743307354,"endTime":1763743338459.3762,"status":"passed","message":"","name":"/Users/765h/Huntaze/tests/integration/api/monitoring-metrics.integration.test.ts"},{"assertionResults":[{"ancestorTitles":["Onboarding Complete API Integration Tests","Success Cases"],"fullName":"Onboarding Complete API Integration Tests Success Cases should return 200 with valid onboarding data","status":"passed","title":"should return 200 with valid onboarding data","duration":2239.098167,"failureMessages":[],"location":{"line":174,"column":5},"meta":{}},{"ancestorTitles":["Onboarding Complete API Integration Tests","Success Cases"],"fullName":"Onboarding Complete API Integration Tests Success Cases should update onboardingCompleted flag in database","status":"failed","title":"should update onboardingCompleted flag in database","duration":957.2847919999999,"failureMessages":["AssertionError: expected undefined to be true // Object.is equality\n    at /Users/765h/Huntaze/tests/integration/api/onboarding-complete.integration.test.ts:204:41\n    at file:///Users/765h/Huntaze/node_modules/@vitest/runner/dist/index.js:753:20"],"location":{"line":193,"column":5},"meta":{}},{"ancestorTitles":["Onboarding Complete API Integration Tests","Success Cases"],"fullName":"Onboarding Complete API Integration Tests Success Cases should save content types to database","status":"passed","title":"should save content types to database","duration":953.759458,"failureMessages":[],"location":{"line":207,"column":5},"meta":{}},{"ancestorTitles":["Onboarding Complete API Integration Tests","Success Cases"],"fullName":"Onboarding Complete API Integration Tests Success Cases should save goal to database","status":"failed","title":"should save goal to database","duration":936.3924999999999,"failureMessages":["AssertionError: expected undefined to be 'grow-audience' // Object.is equality\n    at /Users/765h/Huntaze/tests/integration/api/onboarding-complete.integration.test.ts:232:26\n    at file:///Users/765h/Huntaze/node_modules/@vitest/runner/dist/index.js:753:20"],"location":{"line":221,"column":5},"meta":{}},{"ancestorTitles":["Onboarding Complete API Integration Tests","Success Cases"],"fullName":"Onboarding Complete API Integration Tests Success Cases should save revenue goal to database","status":"failed","title":"should save revenue goal to database","duration":866.4073749999998,"failureMessages":["AssertionError: expected undefined to be 5000 // Object.is equality\n    at /Users/765h/Huntaze/tests/integration/api/onboarding-complete.integration.test.ts:246:33\n    at file:///Users/765h/Huntaze/node_modules/@vitest/runner/dist/index.js:753:20"],"location":{"line":235,"column":5},"meta":{}},{"ancestorTitles":["Onboarding Complete API Integration Tests","Success Cases"],"fullName":"Onboarding Complete API Integration Tests Success Cases should accept minimal onboarding data","status":"failed","title":"should accept minimal onboarding data","duration":744.8580830000001,"failureMessages":["AssertionError: expected 503 to be 200 // Object.is equality\n    at /Users/765h/Huntaze/tests/integration/api/onboarding-complete.integration.test.ts:256:31\n    at file:///Users/765h/Huntaze/node_modules/@vitest/runner/dist/index.js:753:20"],"location":{"line":249,"column":5},"meta":{}},{"ancestorTitles":["Onboarding Complete API Integration Tests","Success Cases"],"fullName":"Onboarding Complete API Integration Tests Success Cases should return user data in response","status":"failed","title":"should return user data in response","duration":766.3624579999996,"failureMessages":["TypeError: Cannot read properties of undefined (reading 'id')\n    at /Users/765h/Huntaze/tests/integration/api/onboarding-complete.integration.test.ts:275:24\n    at file:///Users/765h/Huntaze/node_modules/@vitest/runner/dist/index.js:753:20"],"location":{"line":266,"column":5},"meta":{}},{"ancestorTitles":["Onboarding Complete API Integration Tests","Success Cases"],"fullName":"Onboarding Complete API Integration Tests Success Cases should include success message","status":"failed","title":"should include success message","duration":798.0657080000001,"failureMessages":["AssertionError: expected undefined to be defined\n    at /Users/765h/Huntaze/tests/integration/api/onboarding-complete.integration.test.ts:289:28\n    at file:///Users/765h/Huntaze/node_modules/@vitest/runner/dist/index.js:753:20"],"location":{"line":280,"column":5},"meta":{}},{"ancestorTitles":["Onboarding Complete API Integration Tests","Authentication Failures"],"fullName":"Onboarding Complete API Integration Tests Authentication Failures should return 401 without session","status":"passed","title":"should return 401 without session","duration":575.8776669999988,"failureMessages":[],"location":{"line":299,"column":5},"meta":{}},{"ancestorTitles":["Onboarding Complete API Integration Tests","Authentication Failures"],"fullName":"Onboarding Complete API Integration Tests Authentication Failures should return 401 with invalid session","status":"passed","title":"should return 401 with invalid session","duration":589.0926659999986,"failureMessages":[],"location":{"line":312,"column":5},"meta":{}},{"ancestorTitles":["Onboarding Complete API Integration Tests","CSRF Protection"],"fullName":"Onboarding Complete API Integration Tests CSRF Protection should return 403 without CSRF token","status":"passed","title":"should return 403 without CSRF token","duration":916.2265420000003,"failureMessages":[],"location":{"line":328,"column":5},"meta":{}},{"ancestorTitles":["Onboarding Complete API Integration Tests","CSRF Protection"],"fullName":"Onboarding Complete API Integration Tests CSRF Protection should return 403 with invalid CSRF token","status":"failed","title":"should return 403 with invalid CSRF token","duration":756.3910000000014,"failureMessages":["AssertionError: expected 503 to be 200 // Object.is equality\n    at /Users/765h/Huntaze/tests/integration/api/onboarding-complete.integration.test.ts:351:31\n    at file:///Users/765h/Huntaze/node_modules/@vitest/runner/dist/index.js:753:20"],"location":{"line":341,"column":5},"meta":{}},{"ancestorTitles":["Onboarding Complete API Integration Tests","Validation Errors"],"fullName":"Onboarding Complete API Integration Tests Validation Errors should accept empty content types (all fields optional)","status":"failed","title":"should accept empty content types (all fields optional)","duration":759.4415410000001,"failureMessages":["AssertionError: expected 503 to be 200 // Object.is equality\n    at /Users/765h/Huntaze/tests/integration/api/onboarding-complete.integration.test.ts:368:31\n    at file:///Users/765h/Huntaze/node_modules/@vitest/runner/dist/index.js:753:20"],"location":{"line":360,"column":5},"meta":{}},{"ancestorTitles":["Onboarding Complete API Integration Tests","Validation Errors"],"fullName":"Onboarding Complete API Integration Tests Validation Errors should return 400 with invalid content types","status":"passed","title":"should return 400 with invalid content types","duration":593.7009579999994,"failureMessages":[],"location":{"line":371,"column":5},"meta":{}},{"ancestorTitles":["Onboarding Complete API Integration Tests","Validation Errors"],"fullName":"Onboarding Complete API Integration Tests Validation Errors should return 400 with invalid revenue goal","status":"passed","title":"should return 400 with invalid revenue goal","duration":584.9676250000011,"failureMessages":[],"location":{"line":381,"column":5},"meta":{}},{"ancestorTitles":["Onboarding Complete API Integration Tests","Validation Errors"],"fullName":"Onboarding Complete API Integration Tests Validation Errors should accept empty data (all fields optional)","status":"failed","title":"should accept empty data (all fields optional)","duration":750.1112499999999,"failureMessages":["AssertionError: expected 503 to be 200 // Object.is equality\n    at /Users/765h/Huntaze/tests/integration/api/onboarding-complete.integration.test.ts:402:31\n    at file:///Users/765h/Huntaze/node_modules/@vitest/runner/dist/index.js:753:20"],"location":{"line":394,"column":5},"meta":{}},{"ancestorTitles":["Onboarding Complete API Integration Tests","Already Completed"],"fullName":"Onboarding Complete API Integration Tests Already Completed should return 400 if onboarding already completed","status":"failed","title":"should return 400 if onboarding already completed","duration":1142.8046670000003,"failureMessages":["AssertionError: expected 503 to be 400 // Object.is equality\n    at /Users/765h/Huntaze/tests/integration/api/onboarding-complete.integration.test.ts:423:31\n    at file:///Users/765h/Huntaze/node_modules/@vitest/runner/dist/index.js:753:20"],"location":{"line":411,"column":5},"meta":{}},{"ancestorTitles":["Onboarding Complete API Integration Tests","User Isolation"],"fullName":"Onboarding Complete API Integration Tests User Isolation should only update authenticated user data","status":"passed","title":"should only update authenticated user data","duration":1694.121792,"failureMessages":[],"location":{"line":438,"column":5},"meta":{}},{"ancestorTitles":["Onboarding Complete API Integration Tests","Concurrent Access"],"fullName":"Onboarding Complete API Integration Tests Concurrent Access should handle concurrent completion attempts","status":"passed","title":"should handle concurrent completion attempts","duration":1702.7539579999975,"failureMessages":[],"location":{"line":473,"column":5},"meta":{}},{"ancestorTitles":["Onboarding Complete API Integration Tests","Performance"],"fullName":"Onboarding Complete API Integration Tests Performance should respond within 500ms","status":"passed","title":"should respond within 500ms","duration":984.7267079999983,"failureMessages":[],"location":{"line":497,"column":5},"meta":{}},{"ancestorTitles":["Onboarding Complete API Integration Tests","Error Handling"],"fullName":"Onboarding Complete API Integration Tests Error Handling should include correlation ID in responses","status":"passed","title":"should include correlation ID in responses","duration":947.3542500000003,"failureMessages":[],"location":{"line":517,"column":5},"meta":{}},{"ancestorTitles":["Onboarding Complete API Integration Tests","Error Handling"],"fullName":"Onboarding Complete API Integration Tests Error Handling should return user-friendly error messages","status":"passed","title":"should return user-friendly error messages","duration":582.4390419999982,"failureMessages":[],"location":{"line":529,"column":5},"meta":{}}],"startTime":1763743281470,"endTime":1763743302311.439,"status":"failed","message":"","name":"/Users/765h/Huntaze/tests/integration/api/onboarding-complete.integration.test.ts"},{"assertionResults":[{"ancestorTitles":["S3 Service Integration Tests","upload()"],"fullName":"S3 Service Integration Tests upload() should upload a file successfully","status":"failed","title":"should upload a file successfully","duration":336.28795799999716,"failureMessages":["S3Error: Failed to upload file: The provided token has expired.\n    at Object.upload (/Users/765h/Huntaze/lib/services/s3Service.ts:548:13)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at /Users/765h/Huntaze/tests/integration/services/s3-service.integration.test.ts:93:19\n    at file:///Users/765h/Huntaze/node_modules/@vitest/runner/dist/index.js:753:20"],"location":{"line":89,"column":5},"meta":{}},{"ancestorTitles":["S3 Service Integration Tests","upload()"],"fullName":"S3 Service Integration Tests upload() should upload with custom content-type","status":"failed","title":"should upload with custom content-type","duration":334.6732499999998,"failureMessages":["S3Error: Failed to upload file: The provided token has expired.\n    at Object.upload (/Users/765h/Huntaze/lib/services/s3Service.ts:548:13)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at /Users/765h/Huntaze/tests/integration/services/s3-service.integration.test.ts:106:19\n    at file:///Users/765h/Huntaze/node_modules/@vitest/runner/dist/index.js:753:20"],"location":{"line":102,"column":5},"meta":{}},{"ancestorTitles":["S3 Service Integration Tests","upload()"],"fullName":"S3 Service Integration Tests upload() should upload with custom metadata","status":"failed","title":"should upload with custom metadata","duration":296.24812500000553,"failureMessages":["S3Error: Failed to upload file: The provided token has expired.\n    at Object.upload (/Users/765h/Huntaze/lib/services/s3Service.ts:548:13)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at /Users/765h/Huntaze/tests/integration/services/s3-service.integration.test.ts:123:7\n    at file:///Users/765h/Huntaze/node_modules/@vitest/runner/dist/index.js:753:20"],"location":{"line":119,"column":5},"meta":{}},{"ancestorTitles":["S3 Service Integration Tests","upload()"],"fullName":"S3 Service Integration Tests upload() should auto-detect content-type from extension","status":"failed","title":"should auto-detect content-type from extension","duration":294.93708300000435,"failureMessages":["S3Error: Failed to upload file: The provided token has expired.\n    at Object.upload (/Users/765h/Huntaze/lib/services/s3Service.ts:548:13)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at /Users/765h/Huntaze/tests/integration/services/s3-service.integration.test.ts:143:7\n    at file:///Users/765h/Huntaze/node_modules/@vitest/runner/dist/index.js:753:20"],"location":{"line":139,"column":5},"meta":{}},{"ancestorTitles":["S3 Service Integration Tests","upload()"],"fullName":"S3 Service Integration Tests upload() should throw error for invalid key","status":"passed","title":"should throw error for invalid key","duration":0.5879160000040429,"failureMessages":[],"location":{"line":152,"column":5},"meta":{}},{"ancestorTitles":["S3 Service Integration Tests","upload()"],"fullName":"S3 Service Integration Tests upload() should throw error for invalid body","status":"passed","title":"should throw error for invalid body","duration":0.09991599999921164,"failureMessages":[],"location":{"line":163,"column":5},"meta":{}},{"ancestorTitles":["S3 Service Integration Tests","exists()"],"fullName":"S3 Service Integration Tests exists() should return true for existing file","status":"failed","title":"should return true for existing file","duration":313.6597499999989,"failureMessages":["S3Error: Failed to upload file: The provided token has expired.\n    at Object.upload (/Users/765h/Huntaze/lib/services/s3Service.ts:548:13)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at /Users/765h/Huntaze/tests/integration/services/s3-service.integration.test.ts:180:7\n    at file:///Users/765h/Huntaze/node_modules/@vitest/runner/dist/index.js:753:20"],"location":{"line":176,"column":5},"meta":{}},{"ancestorTitles":["S3 Service Integration Tests","exists()"],"fullName":"S3 Service Integration Tests exists() should return false for non-existing file","status":"failed","title":"should return false for non-existing file","duration":289.31733299999905,"failureMessages":["S3Error: Failed to check if object exists: UnknownError\n    at Object.exists (/Users/765h/Huntaze/lib/services/s3Service.ts:862:13)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at /Users/765h/Huntaze/tests/integration/services/s3-service.integration.test.ts:189:22\n    at file:///Users/765h/Huntaze/node_modules/@vitest/runner/dist/index.js:753:20"],"location":{"line":186,"column":5},"meta":{}},{"ancestorTitles":["S3 Service Integration Tests","exists()"],"fullName":"S3 Service Integration Tests exists() should throw error for invalid key","status":"passed","title":"should throw error for invalid key","duration":0.14833300000464078,"failureMessages":[],"location":{"line":193,"column":5},"meta":{}},{"ancestorTitles":["S3 Service Integration Tests","delete()"],"fullName":"S3 Service Integration Tests delete() should delete existing file","status":"failed","title":"should delete existing file","duration":287.30312499999854,"failureMessages":["S3Error: Failed to upload file: The provided token has expired.\n    at Object.upload (/Users/765h/Huntaze/lib/services/s3Service.ts:548:13)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at /Users/765h/Huntaze/tests/integration/services/s3-service.integration.test.ts:205:7\n    at file:///Users/765h/Huntaze/node_modules/@vitest/runner/dist/index.js:753:20"],"location":{"line":201,"column":5},"meta":{}},{"ancestorTitles":["S3 Service Integration Tests","delete()"],"fullName":"S3 Service Integration Tests delete() should be idempotent (delete non-existing file)","status":"failed","title":"should be idempotent (delete non-existing file)","duration":296.0866249999963,"failureMessages":["Error: promise rejected \"S3Error: Failed to delete file: The provi… { …(4) }\" instead of resolving\n    at _Assertion.__VITEST_RESOLVES__ (file:///Users/765h/Huntaze/node_modules/@vitest/expect/dist/index.js:1642:17)\n    at _Assertion.propertyGetter (file:///Users/765h/Huntaze/node_modules/chai/index.js:1570:27)\n    at Reflect.get (<anonymous>)\n    at Object.proxyGetter [as get] (file:///Users/765h/Huntaze/node_modules/chai/index.js:1659:22)\n    at /Users/765h/Huntaze/tests/integration/services/s3-service.integration.test.ts:225:7\n    at file:///Users/765h/Huntaze/node_modules/@vitest/runner/dist/index.js:157:11\n    at file:///Users/765h/Huntaze/node_modules/@vitest/runner/dist/index.js:753:26\n    at file:///Users/765h/Huntaze/node_modules/@vitest/runner/dist/index.js:1636:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///Users/765h/Huntaze/node_modules/@vitest/runner/dist/index.js:1602:10)"],"location":{"line":219,"column":5},"meta":{}},{"ancestorTitles":["S3 Service Integration Tests","delete()"],"fullName":"S3 Service Integration Tests delete() should throw error for invalid key","status":"passed","title":"should throw error for invalid key","duration":0.13149999999586726,"failureMessages":[],"location":{"line":228,"column":5},"meta":{}},{"ancestorTitles":["S3 Service Integration Tests","getMetadata()"],"fullName":"S3 Service Integration Tests getMetadata() should get metadata for existing file","status":"failed","title":"should get metadata for existing file","duration":294.35149999999703,"failureMessages":["S3Error: Failed to upload file: The provided token has expired.\n    at Object.upload (/Users/765h/Huntaze/lib/services/s3Service.ts:548:13)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at /Users/765h/Huntaze/tests/integration/services/s3-service.integration.test.ts:240:7\n    at file:///Users/765h/Huntaze/node_modules/@vitest/runner/dist/index.js:753:20"],"location":{"line":236,"column":5},"meta":{}},{"ancestorTitles":["S3 Service Integration Tests","getMetadata()"],"fullName":"S3 Service Integration Tests getMetadata() should throw NOT_FOUND for non-existing file","status":"failed","title":"should throw NOT_FOUND for non-existing file","duration":296.9712500000023,"failureMessages":["AssertionError: expected 'NETWORK_ERROR' to be 'NOT_FOUND' // Object.is equality\n    at /Users/765h/Huntaze/tests/integration/services/s3-service.integration.test.ts:259:41\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at file:///Users/765h/Huntaze/node_modules/@vitest/runner/dist/index.js:753:20"],"location":{"line":251,"column":5},"meta":{}},{"ancestorTitles":["S3 Service Integration Tests","getMetadata()"],"fullName":"S3 Service Integration Tests getMetadata() should throw error for invalid key","status":"passed","title":"should throw error for invalid key","duration":0.12383299999783048,"failureMessages":[],"location":{"line":263,"column":5},"meta":{}},{"ancestorTitles":["S3 Service Integration Tests","getSignedUrl()"],"fullName":"S3 Service Integration Tests getSignedUrl() should generate signed URL","status":"failed","title":"should generate signed URL","duration":311.80108300000575,"failureMessages":["S3Error: Failed to upload file: The provided token has expired.\n    at Object.upload (/Users/765h/Huntaze/lib/services/s3Service.ts:548:13)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at /Users/765h/Huntaze/tests/integration/services/s3-service.integration.test.ts:275:7\n    at file:///Users/765h/Huntaze/node_modules/@vitest/runner/dist/index.js:753:20"],"location":{"line":271,"column":5},"meta":{}},{"ancestorTitles":["S3 Service Integration Tests","getSignedUrl()"],"fullName":"S3 Service Integration Tests getSignedUrl() should generate URL with custom expiration","status":"failed","title":"should generate URL with custom expiration","duration":297.7410000000018,"failureMessages":["S3Error: Failed to upload file: The provided token has expired.\n    at Object.upload (/Users/765h/Huntaze/lib/services/s3Service.ts:548:13)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at /Users/765h/Huntaze/tests/integration/services/s3-service.integration.test.ts:288:7\n    at file:///Users/765h/Huntaze/node_modules/@vitest/runner/dist/index.js:753:20"],"location":{"line":284,"column":5},"meta":{}},{"ancestorTitles":["S3 Service Integration Tests","getSignedUrl()"],"fullName":"S3 Service Integration Tests getSignedUrl() should throw error for invalid expiration","status":"passed","title":"should throw error for invalid expiration","duration":0.3114999999961583,"failureMessages":[],"location":{"line":296,"column":5},"meta":{}},{"ancestorTitles":["S3 Service Integration Tests","getSignedUrl()"],"fullName":"S3 Service Integration Tests getSignedUrl() should throw error for invalid key","status":"passed","title":"should throw error for invalid key","duration":0.0940000000045984,"failureMessages":[],"location":{"line":308,"column":5},"meta":{}},{"ancestorTitles":["S3 Service Integration Tests","generateKey()"],"fullName":"S3 Service Integration Tests generateKey() should generate unique keys","status":"passed","title":"should generate unique keys","duration":0.1839170000021113,"failureMessages":[],"location":{"line":316,"column":5},"meta":{}},{"ancestorTitles":["S3 Service Integration Tests","generateKey()"],"fullName":"S3 Service Integration Tests generateKey() should generate keys for different types","status":"passed","title":"should generate keys for different types","duration":0.06808299999829615,"failureMessages":[],"location":{"line":325,"column":5},"meta":{}},{"ancestorTitles":["S3 Service Integration Tests","generateKey()"],"fullName":"S3 Service Integration Tests generateKey() should sanitize file extensions","status":"passed","title":"should sanitize file extensions","duration":0.06416699999681441,"failureMessages":[],"location":{"line":333,"column":5},"meta":{}},{"ancestorTitles":["S3 Service Integration Tests","extractKeyFromUrl()"],"fullName":"S3 Service Integration Tests extractKeyFromUrl() should extract key from CDN URL","status":"passed","title":"should extract key from CDN URL","duration":0.07633399999758694,"failureMessages":[],"location":{"line":341,"column":5},"meta":{}},{"ancestorTitles":["S3 Service Integration Tests","extractKeyFromUrl()"],"fullName":"S3 Service Integration Tests extractKeyFromUrl() should handle URLs with query parameters","status":"passed","title":"should handle URLs with query parameters","duration":0.0610000000015134,"failureMessages":[],"location":{"line":350,"column":5},"meta":{}},{"ancestorTitles":["S3 Service Integration Tests","extractKeyFromUrl()"],"fullName":"S3 Service Integration Tests extractKeyFromUrl() should return input for invalid URLs","status":"passed","title":"should return input for invalid URLs","duration":0.12516599999798927,"failureMessages":[],"location":{"line":359,"column":5},"meta":{}},{"ancestorTitles":["S3 Service Integration Tests","Error Handling"],"fullName":"S3 Service Integration Tests Error Handling should include correlation ID in errors","status":"passed","title":"should include correlation ID in errors","duration":0.08212500000081491,"failureMessages":[],"location":{"line":369,"column":5},"meta":{}},{"ancestorTitles":["S3 Service Integration Tests","Error Handling"],"fullName":"S3 Service Integration Tests Error Handling should mark retryable errors correctly","status":"passed","title":"should mark retryable errors correctly","duration":0.06837499999528518,"failureMessages":[],"location":{"line":382,"column":5},"meta":{}},{"ancestorTitles":["S3 Service Integration Tests","Error Handling"],"fullName":"S3 Service Integration Tests Error Handling should include metadata in errors","status":"passed","title":"should include metadata in errors","duration":0.06462499999906868,"failureMessages":[],"location":{"line":397,"column":5},"meta":{}},{"ancestorTitles":["S3 Service Integration Tests","Performance"],"fullName":"S3 Service Integration Tests Performance should upload small file quickly (< 1s)","status":"failed","title":"should upload small file quickly (< 1s)","duration":301.17183300000033,"failureMessages":["S3Error: Failed to upload file: The provided token has expired.\n    at Object.upload (/Users/765h/Huntaze/lib/services/s3Service.ts:548:13)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at /Users/765h/Huntaze/tests/integration/services/s3-service.integration.test.ts:417:7\n    at file:///Users/765h/Huntaze/node_modules/@vitest/runner/dist/index.js:753:20"],"location":{"line":412,"column":5},"meta":{}},{"ancestorTitles":["S3 Service Integration Tests","Performance"],"fullName":"S3 Service Integration Tests Performance should handle concurrent uploads","status":"failed","title":"should handle concurrent uploads","duration":306.31379200000083,"failureMessages":["S3Error: Failed to upload file: The provided token has expired.\n    at Object.upload (/Users/765h/Huntaze/lib/services/s3Service.ts:548:13)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Promise.all (index 0)\n    at /Users/765h/Huntaze/tests/integration/services/s3-service.integration.test.ts:431:7\n    at file:///Users/765h/Huntaze/node_modules/@vitest/runner/dist/index.js:753:20"],"location":{"line":423,"column":5},"meta":{}},{"ancestorTitles":["S3 Service Integration Tests","Cache Control"],"fullName":"S3 Service Integration Tests Cache Control should set immutable cache for hashed files","status":"failed","title":"should set immutable cache for hashed files","duration":290.4438749999972,"failureMessages":["S3Error: Failed to upload file: The provided token has expired.\n    at Object.upload (/Users/765h/Huntaze/lib/services/s3Service.ts:548:13)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at /Users/765h/Huntaze/tests/integration/services/s3-service.integration.test.ts:449:7\n    at file:///Users/765h/Huntaze/node_modules/@vitest/runner/dist/index.js:753:20"],"location":{"line":445,"column":5},"meta":{}},{"ancestorTitles":["S3 Service Integration Tests","Cache Control"],"fullName":"S3 Service Integration Tests Cache Control should set long cache for images","status":"failed","title":"should set long cache for images","duration":289.10199999999895,"failureMessages":["S3Error: Failed to upload file: The provided token has expired.\n    at Object.upload (/Users/765h/Huntaze/lib/services/s3Service.ts:548:13)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at /Users/765h/Huntaze/tests/integration/services/s3-service.integration.test.ts:459:7\n    at file:///Users/765h/Huntaze/node_modules/@vitest/runner/dist/index.js:753:20"],"location":{"line":455,"column":5},"meta":{}},{"ancestorTitles":["S3 Service Integration Tests","Cache Control"],"fullName":"S3 Service Integration Tests Cache Control should set short cache for HTML","status":"failed","title":"should set short cache for HTML","duration":291.2973750000019,"failureMessages":["S3Error: Failed to upload file: The provided token has expired.\n    at Object.upload (/Users/765h/Huntaze/lib/services/s3Service.ts:548:13)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at /Users/765h/Huntaze/tests/integration/services/s3-service.integration.test.ts:469:7\n    at file:///Users/765h/Huntaze/node_modules/@vitest/runner/dist/index.js:753:20"],"location":{"line":465,"column":5},"meta":{}}],"startTime":1763743313247,"endTime":1763743318377.2974,"status":"failed","message":"","name":"/Users/765h/Huntaze/tests/integration/services/s3-service.integration.test.ts"},{"assertionResults":[{"ancestorTitles":["S3 Service - Session Token Support","Credentials Configuration"],"fullName":"S3 Service - Session Token Support Credentials Configuration should initialize with session token if provided","status":"passed","title":"should initialize with session token if provided","duration":0.14025000000401633,"failureMessages":[],"location":{"line":30,"column":5},"meta":{}},{"ancestorTitles":["S3 Service - Session Token Support","Credentials Configuration"],"fullName":"S3 Service - Session Token Support Credentials Configuration should work without session token (standard credentials)","status":"passed","title":"should work without session token (standard credentials)","duration":0.1809590000048047,"failureMessages":[],"location":{"line":36,"column":5},"meta":{}},{"ancestorTitles":["S3 Service - Session Token Support","Upload with Session Token"],"fullName":"S3 Service - Session Token Support Upload with Session Token should upload file successfully","status":"failed","title":"should upload file successfully","duration":356.4604590000017,"failureMessages":["S3Error: Failed to upload file: The provided token has expired.\n    at Object.upload (/Users/765h/Huntaze/lib/services/s3Service.ts:548:13)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at /Users/765h/Huntaze/tests/integration/services/s3-session-token.test.ts:46:21\n    at file:///Users/765h/Huntaze/node_modules/@vitest/runner/dist/index.js:753:20"],"location":{"line":44,"column":5},"meta":{}},{"ancestorTitles":["S3 Service - Session Token Support","Upload with Session Token"],"fullName":"S3 Service - Session Token Support Upload with Session Token should verify uploaded file exists","status":"failed","title":"should verify uploaded file exists","duration":293.2659579999963,"failureMessages":["S3Error: Failed to check if object exists: UnknownError\n    at Object.exists (/Users/765h/Huntaze/lib/services/s3Service.ts:862:13)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at /Users/765h/Huntaze/tests/integration/services/s3-session-token.test.ts:79:24\n    at file:///Users/765h/Huntaze/node_modules/@vitest/runner/dist/index.js:753:20"],"location":{"line":77,"column":5},"meta":{}},{"ancestorTitles":["S3 Service - Session Token Support","Upload with Session Token"],"fullName":"S3 Service - Session Token Support Upload with Session Token should get metadata of uploaded file","status":"failed","title":"should get metadata of uploaded file","duration":284.46225000000413,"failureMessages":["S3Error: Failed to fetch metadata: UnknownError\n    at Object.getMetadata (/Users/765h/Huntaze/lib/services/s3Service.ts:964:13)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at /Users/765h/Huntaze/tests/integration/services/s3-session-token.test.ts:94:26\n    at file:///Users/765h/Huntaze/node_modules/@vitest/runner/dist/index.js:753:20"],"location":{"line":92,"column":5},"meta":{}},{"ancestorTitles":["S3 Service - Session Token Support","Delete with Session Token"],"fullName":"S3 Service - Session Token Support Delete with Session Token should delete file successfully","status":"failed","title":"should delete file successfully","duration":341.1909579999992,"failureMessages":["S3Error: Failed to delete file: The provided token has expired.\n    at Object.delete (/Users/765h/Huntaze/lib/services/s3Service.ts:637:13)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at /Users/765h/Huntaze/tests/integration/services/s3-session-token.test.ts:116:9\n    at file:///Users/765h/Huntaze/node_modules/@vitest/runner/dist/index.js:753:20"],"location":{"line":114,"column":5},"meta":{}},{"ancestorTitles":["S3 Service - Session Token Support","Error Handling with Session Token"],"fullName":"S3 Service - Session Token Support Error Handling with Session Token should handle expired session token gracefully","status":"passed","title":"should handle expired session token gracefully","duration":296.6568750000006,"failureMessages":[],"location":{"line":134,"column":5},"meta":{}},{"ancestorTitles":["S3 Service - Session Token Support","Error Handling with Session Token"],"fullName":"S3 Service - Session Token Support Error Handling with Session Token should include correlation ID in errors","status":"passed","title":"should include correlation ID in errors","duration":0.3321250000008149,"failureMessages":[],"location":{"line":160,"column":5},"meta":{}},{"ancestorTitles":["S3 Service - Session Token Support","Signed URL with Session Token"],"fullName":"S3 Service - Session Token Support Signed URL with Session Token should generate signed URL successfully","status":"failed","title":"should generate signed URL successfully","duration":320.2268750000003,"failureMessages":["S3Error: Failed to upload file: The provided token has expired.\n    at Object.upload (/Users/765h/Huntaze/lib/services/s3Service.ts:548:13)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at /Users/765h/Huntaze/tests/integration/services/s3-session-token.test.ts:186:9\n    at file:///Users/765h/Huntaze/node_modules/@vitest/runner/dist/index.js:753:20"],"location":{"line":183,"column":5},"meta":{}},{"ancestorTitles":["S3 Service - Session Token Support","Retry Logic with Session Token"],"fullName":"S3 Service - Session Token Support Retry Logic with Session Token should retry on network errors","status":"passed","title":"should retry on network errors","duration":303.17175000000134,"failureMessages":[],"location":{"line":215,"column":5},"meta":{}}],"startTime":1763743317313,"endTime":1763743319509.1716,"status":"failed","message":"","name":"/Users/765h/Huntaze/tests/integration/services/s3-session-token.test.ts"}]}