test(api): add comprehensive integration tests for admin feature flags endpoint

Add complete test suite for /api/admin/feature-flags with 41+ test scenarios
covering authentication, validation, concurrency, performance, and security.

## Tests Added

### Integration Tests (tests/integration/api/admin-feature-flags.test.ts)
- GET endpoint: 13 test scenarios
  - Authentication & authorization (5 tests)
  - Response schema validation (5 tests)
  - Error handling (2 tests)
  - Performance benchmarks (1 test)

- POST endpoint: 23 test scenarios
  - Authentication & authorization (2 tests)
  - Request validation (10 tests)
  - Success response validation (3 tests)
  - Idempotence (1 test)
  - Concurrent access (2 tests)
  - Error handling (2 tests)
  - Performance benchmarks (1 test)

- HTTP methods validation (5 tests)
- Security validation (2 tests)

### Test Fixtures (tests/integration/api/fixtures/feature-flags-samples.ts)
- Valid feature flag configurations
- Valid update request samples
- Invalid update request samples with expected errors
- Edge case scenarios
- Concurrent update scenarios
- Performance benchmarks
- Market codes (valid/invalid)
- Test user IDs

## Documentation Added

### Integration Test README (tests/integration/api/admin-feature-flags-README.md)
- Complete test coverage overview
- Running instructions
- Test scenarios with code examples
- Fixtures usage guide
- Response schemas
- Common issues and solutions
- Performance benchmarks
- Security considerations
- CI/CD integration examples
- Maintenance guidelines

### Quick Start Guide (FEATURE_FLAGS_TESTS_QUICK_START.md)
- 2-minute setup instructions
- Essential commands
- Manual testing with curl examples
- Expected results
- Quick troubleshooting
- File structure overview
- Key test scenarios checklist
- Code examples
- Tips and best practices

### API Tests Documentation (docs/api-tests.md)
- Added Section 3: /api/admin/feature-flags endpoint
- 10 detailed test scenarios with code examples
- Schema validation examples
- Performance validation examples
- Concurrent access patterns

## Test Coverage

✅ Authentication & Authorization
  - Unauthenticated requests (401)
  - Invalid tokens (401)
  - Malformed headers (401)
  - Non-admin users (403)
  - Valid admin access (200)

✅ Input Validation
  - Valid enabled flag (boolean)
  - Valid rolloutPercentage (0-100)
  - Invalid rolloutPercentage (<0, >100) → 400
  - Valid markets array
  - Valid userWhitelist array
  - Empty updates → 400
  - Invalid JSON → 400
  - Multiple field updates
  - Ignored invalid fields

✅ Response Validation
  - Zod schema compliance
  - Correlation ID presence (UUID format)
  - Success flag in POST responses
  - Updated flags reflection
  - Error message structure

✅ Concurrency & Idempotence
  - 5 concurrent updates
  - Data consistency under load
  - No race conditions
  - Idempotent repeated updates

✅ Performance
  - GET requests <500ms
  - POST requests <1s
  - Concurrent requests <2s

✅ Security
  - No sensitive data exposure
  - XSS prevention
  - Input sanitization
  - Malicious header handling

✅ HTTP Methods
  - GET supported
  - POST supported
  - PUT rejected (405)
  - DELETE rejected (405)
  - PATCH rejected (405)

## Files Changed

### New Files
- tests/integration/api/admin-feature-flags.test.ts (41 tests)
- tests/integration/api/fixtures/feature-flags-samples.ts
- tests/integration/api/admin-feature-flags-README.md
- FEATURE_FLAGS_TESTS_QUICK_START.md
- FEATURE_FLAGS_TESTS_COMMIT.txt

### Modified Files
- docs/api-tests.md (added Section 3 with 10 scenarios)

## Running Tests

```bash
# All tests
npm run test:integration tests/integration/api/admin-feature-flags.test.ts

# With authentication (full coverage)
export TEST_ADMIN_TOKEN=your-token
npm run test:integration tests/integration/api/admin-feature-flags.test.ts

# Specific scenarios
npm run test:integration -- --grep "Authentication"
npm run test:integration -- --grep "Validation"
npm run test:integration -- --grep "Concurrent"
```

## Test Results

Expected: 41 tests passed in ~5-10 seconds
- 13 GET endpoint tests
- 23 POST endpoint tests
- 5 HTTP method tests
- 2 security tests

## Related

- Feature Flags API: app/api/admin/feature-flags/route.ts
- Feature Flags Logic: lib/feature-flags.ts
- Kill Switch: lib/onboarding-kill-switch.ts
- API Documentation: docs/api/admin-feature-flags.md
- Client Examples: docs/api/admin-feature-flags-client.md

## Testing Strategy

Following established patterns from:
- tests/integration/api/metrics.test.ts
- tests/integration/api/onboarding.test.ts
- tests/integration/api/store-publish.test.ts
- docs/api-tests.md

## Next Steps

- [ ] Run tests in CI/CD pipeline
- [ ] Add to pre-deployment validation
- [ ] Monitor test execution time
- [ ] Add rate limiting tests when implemented
- [ ] Add audit log tests when implemented

---

Co-authored-by: Kiro AI <kiro@huntaze.com>
