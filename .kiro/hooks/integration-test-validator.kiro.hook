{
  "enabled": true,
  "name": "Integration Test Validator",
  "description": "Validates integration tests for API endpoints when API files are edited",
  "version": "1",
  "when": {
    "type": "fileEdited",
    "patterns": [
      "**/api/**/*.ts",
      "**/app/api/**/*.ts"
    ]
  },
  "then": {
    "type": "askAgent",
    "prompt": "En tant que Tester Agent, crée les tests d'intégration :\n\n1. Génère les tests pour chaque endpoint API\n2. Teste tous les codes de statut HTTP possibles\n3. Valide les schémas de réponse avec Zod\n4. Teste l'authentification et autorisation\n5. Vérifie la gestion des limites de rate (rate limiting)\n6. Teste les cas de concurrent access\n7. Crée des fixtures de données de test\n8. Documente les scénarios de test dans api-tests.md"
  }
}