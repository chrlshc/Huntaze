{
  "hooks": [
    {
      "enabled": true,
      "name": "Architecture Validator",
      "agent": "architect",
      "description": "Valide l'architecture lors de modifications de specs",
      "version": "1",
      "when": {
        "type": "fileEdited",
        "patterns": [
          "**/requirements.md",
          "**/design.md",
          "**/architecture/**/*.md",
          "**/*.architecture.yml"
        ]
      },
      "then": {
        "type": "askAgent",
        "prompt": "En tant qu'Architect Agent, analyse les changements d'architecture :\n\n1. Vérifie la cohérence de l'architecture globale\n2. Valide les patterns de conception choisis\n3. Évalue la scalabilité (objectif : 10k+ utilisateurs concurrents)\n4. Vérifie la compatibilité avec l'infrastructure AWS existante\n5. Identifie les points de défaillance potentiels\n6. Suggère des optimisations d'architecture\n7. Documente les décisions architecturales dans design.md"
      }
    },
    {
      "enabled": true,
      "name": "Technology Stack Advisor",
      "agent": "architect",
      "description": "Conseille sur les choix technologiques",
      "version": "1",
      "when": {
        "type": "manual"
      },
      "then": {
        "type": "askAgent",
        "prompt": "En tant qu'Architect Agent, analyse la stack technologique actuelle :\n\n1. Examine package.json et les dépendances\n2. Identifie les technologies obsolètes ou sous-optimales\n3. Suggère des alternatives modernes et performantes\n4. Évalue l'impact sur l'infrastructure AWS (coûts, performances)\n5. Propose un plan de migration si nécessaire\n6. Documente les recommandations dans tech-stack-analysis.md"
      }
    },
    {
      "enabled": true,
      "name": "Database Schema Validator",
      "agent": "architect",
      "description": "Valide les schémas de base de données Prisma",
      "version": "1",
      "when": {
        "type": "fileEdited",
        "patterns": [
          "**/prisma/schema.prisma",
          "**/database/**/*.sql"
        ]
      },
      "then": {
        "type": "askAgent",
        "prompt": "En tant qu'Architect Agent, valide le schéma de base de données :\n\n1. Vérifie les relations et contraintes d'intégrité\n2. Identifie les problèmes de normalisation\n3. Évalue les performances des index\n4. Valide les types de données choisis\n5. Suggère des optimisations pour les requêtes fréquentes\n6. Vérifie la conformité avec les best practices Prisma\n7. Documente les migrations nécessaires"
      }
    }
  ]
}