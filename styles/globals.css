@tailwind base;
@tailwind components;
@tailwind utilities;

/* Global focus outline removal */
*:focus:not(button):not(a):not(input):not(select):not(textarea) {
  outline: none !important;
  box-shadow: none !important;
}

[data-nextjs-scroll-focus-boundary]:focus,
[data-nextjs-scroll-focus-boundary]:focus-visible {
  outline: none !important;
  box-shadow: none !important;
}

/* Ensure design tokens are available to pages/ */
@import './design-system.css';

/* Shopify design tokens for OnlyFans dashboard */
@import './shopify-tokens.css';

/* TailAdmin design tokens for messaging interface */
@import './tailadmin-tokens.css';

/* Calm color palette for messaging interface */
@import './messaging-calm-palette.css';

/* Messaging spacing tokens (used by components/messages/*.css) */
@import './messaging-spacing-tokens.css';

/* Messages alignment fix - Force proper left/right alignment */
@import './messages-alignment-fix.css';

/* Chat UI Kit overrides for TailAdmin styling */
@import './chat-ui-kit-overrides.css';

/* Dashboard views shared design tokens */
@import './dashboard-views.css';

/* Dashboard polish tokens for enhanced UI components */
@import './dashboard-polish-tokens.css';

/* OnlyFans pixel-perfect polish tokens */
@import './onlyfans-polish-tokens.css';

/* Mobile card no margin - Remove card margins/padding on mobile */
@import './mobile-card-no-margin.css';

/* ===========================================
   MOBILE RESPONSIVE BASE STYLES
   =========================================== */

html, body {
  margin: 0;
  padding: 0;
  height: 100%;
  width: 100%;
  overflow: hidden; /* EmpÃªche le scroll sur body - le scroll se fait dans le main */
  overflow-x: hidden; /* Prevent horizontal scroll (Requirement 9) */
}

body {
  @apply antialiased;
  background-color: var(--bg-primary, #09090b);
  color: var(--text-primary, #fafafa);
  font-family: var(--font-sans), Inter, sans-serif;
}

/* Responsive images/media - never overflow (Requirement 3) */
img, video, canvas, svg {
  max-width: 100%;
  height: auto;
}

/* iOS Safari zoom fix on input focus (Requirement 7) */
input, select, textarea {
  font-size: 16px;
}

/* Touch target minimum size (Requirement 6) */
button, 
[role="button"],
a.btn,
.touch-target {
  min-height: 44px;
}

/* Mobile viewport height fix - use dvh for mobile browsers */
.h-screen-safe {
  height: 100vh;
  height: 100dvh;
}

/* Safe area support for notched devices (Requirement 10) */
.safe-area-top {
  padding-top: env(safe-area-inset-top);
}

.safe-area-bottom {
  padding-bottom: env(safe-area-inset-bottom);
}

.safe-area-left {
  padding-left: env(safe-area-inset-left);
}

.safe-area-right {
  padding-right: env(safe-area-inset-right);
}

a {
  color: inherit;
  text-decoration: inherit;
  @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2 focus-visible:ring-offset-background-primary;
}

::selection {
  background-color: transparent;
  color: inherit;
}

::-moz-selection {
  background-color: transparent;
  color: inherit;
}

.home-no-animations *,
.home-no-animations *::before,
.home-no-animations *::after {
  animation: none !important;
  transition: none !important;
}

.home-no-animations a:hover,
.home-no-animations a:active,
.home-no-animations button:hover,
.home-no-animations button:active,
.home-no-animations [role="button"]:hover,
.home-no-animations [role="button"]:active {
  transform: none !important;
}

/* Disable text selection on interactive lists */
.fan-list,
.fan-card,
.messaging-column--left {
  user-select: none;
  -webkit-user-select: none;
}

@layer base {
  html {
    scroll-behavior: smooth;
    font-feature-settings: "cv02", "cv03", "cv04";
  }

  body {
    text-rendering: optimizeLegibility;
    -webkit-font-smoothing: antialiased;
  }

  button,
  input,
  textarea,
  select {
    font: inherit;
  }
}

@layer components {
  .container-default {
    @apply mx-auto w-full max-w-7xl px-4 sm:px-6 lg:px-8;
  }

  .page-stack {
    @apply space-y-6;
  }

  .section-stack {
    @apply space-y-4;
  }

  .actions-row {
    @apply flex flex-wrap items-center gap-2;
  }

  .focus-ring {
    @apply focus:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2 focus-visible:ring-offset-background-primary;
  }

  .btn {
    @apply inline-flex items-center justify-center gap-2 rounded-lg px-4 py-2 text-sm font-semibold transition duration-200 focus-ring disabled:cursor-not-allowed disabled:opacity-60;
  }

  .btn-primary {
    @apply bg-primary text-primary-foreground shadow-sm hover:bg-primary-hover;
  }

  .btn-secondary {
    @apply border border-border bg-surface-raised text-content-secondary shadow-sm hover:border-border-strong hover:bg-surface-muted;
  }

  .btn-ghost {
    @apply bg-transparent text-content-secondary hover:bg-surface-muted/70;
  }

  .btn-outline {
    @apply border border-border bg-transparent text-content-secondary hover:border-border-strong hover:bg-surface-muted/70;
  }

  .btn-outline-dashed {
    @apply border border-dashed border-border bg-transparent text-content-secondary hover:border-border-strong;
  }

  .surface {
    @apply rounded-xl border border-border-subtle bg-surface-raised shadow-sm;
  }

  .surface-muted {
    @apply rounded-xl border border-border-subtle bg-surface-muted;
  }

  .input-quiet {
    @apply w-full rounded-lg border border-border bg-surface-raised px-3 py-2 text-sm text-content-primary placeholder:text-content-subtle transition focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20;
  }

  .kpi {
    @apply rounded-xl border border-border-subtle bg-surface-raised p-4 text-content-secondary shadow-sm;
  }

  .kpi-h {
    @apply text-xs uppercase tracking-wide text-content-subtle;
  }

  .kpi-v {
    @apply text-2xl font-semibold text-content-primary;
  }

  .chip {
    @apply inline-flex items-center gap-1 rounded-full border border-border-subtle bg-surface-muted px-2 py-0.5 text-xs text-content-secondary;
  }

  .chip-ok {
    @apply border-success/40 bg-success/15 text-success;
  }

  .chip-no {
    @apply border-danger/40 bg-danger/15 text-danger;
  }

  .icon-button {
    @apply grid h-9 w-9 place-items-center rounded-full border border-border-subtle bg-transparent text-content-secondary transition hover:border-primary hover:bg-primary/10 focus-ring;
  }

  /* Table overflow wrapper for mobile (Requirement 16) */
  .table-responsive {
    @apply overflow-x-auto -mx-4 px-4;
    -webkit-overflow-scrolling: touch;
  }

  /* Mobile-first responsive grid (Requirement 14) */
  .grid-responsive {
    @apply grid grid-cols-1 gap-4;
  }

  @media (min-width: 768px) {
    .grid-responsive {
      @apply grid-cols-2;
    }
  }

  @media (min-width: 1024px) {
    .grid-responsive {
      @apply grid-cols-3;
    }
  }

  /* Fluid container (Requirement 2) */
  .container-fluid {
    width: min(1200px, 100%);
    margin: 0 auto;
    padding: 0 16px;
  }

  /* Touch target helper (Requirement 6) */
  .touch-target {
    min-height: 44px;
    min-width: 44px;
  }
}
